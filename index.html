<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Oral Surgery Medical Management MCQ Quiz</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', Courier, monospace;
            background: #2c3e50;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,.05) 2px, rgba(0,0,0,.05) 4px);
            min-height: 100vh;
            padding: 20px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }
        
        * {
            -webkit-tap-highlight-color: transparent;
        }
        
        button, .option, .lecture-btn, .shop-tab, .item-btn {
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        
        button:active, .option:active, .lecture-btn:active {
            transform: scale(0.95);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: #ecf0f1;
            border-radius: 0;
            box-shadow: 
                0 0 0 3px #34495e,
                0 0 0 6px #ecf0f1,
                8px 8px 0 6px rgba(0,0,0,0.3);
            overflow: hidden;
            border: 3px solid #34495e;
        }

        .header {
            background: #34495e;
            color: #ecf0f1;
            padding: 30px;
            text-align: center;
            border-bottom: 5px solid #2c3e50;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 3px 3px 0 rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
            font-style: italic;
        }

        .creator-credit {
            position: absolute;
            bottom: 10px;
            right: 20px;
            font-size: 0.85em;
            color: #95a5a6;
            font-style: italic;
            text-align: right;
        }

        .creator-credit strong {
            color: #ecf0f1;
            font-weight: bold;
        }

        .main-content {
            display: flex;
            min-height: 600px;
        }

        .sidebar {
            width: 300px;
            background: #bdc3c7;
            border-right: 5px solid #34495e;
            padding: 20px;
            overflow-y: auto;
        }

        .lecture-list {
            list-style: none;
        }

        .lecture-item {
            margin-bottom: 10px;
        }

        .lecture-btn {
            width: 100%;
            padding: 15px;
            background: #ecf0f1;
            border: 3px solid #34495e;
            border-radius: 0;
            cursor: pointer;
            font-size: 1em;
            font-family: 'Courier New', Courier, monospace;
            font-weight: bold;
            transition: all 0.2s;
            text-align: left;
            color: #2c3e50;
            box-shadow: 3px 3px 0 rgba(0,0,0,0.2);
        }

        .lecture-btn:hover {
            background: #3498db;
            color: white;
            transform: translate(-2px, -2px);
            box-shadow: 5px 5px 0 rgba(0,0,0,0.3);
        }

        .lecture-btn.active {
            background: #e74c3c;
            color: white;
            box-shadow: inset 3px 3px 5px rgba(0,0,0,0.3);
        }

        .content-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            background: #ecf0f1;
        }

        .welcome-screen {
            text-align: center;
            padding: 50px 20px;
        }

        .welcome-screen h2 {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .welcome-screen p {
            color: #34495e;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .quiz-container {
            display: none;
        }

        .quiz-container.active {
            display: block;
        }

        .quiz-header {
            background: #34495e;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 0;
            margin-bottom: 30px;
            border: 3px solid #2c3e50;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.2);
        }

        .quiz-header h2 {
            font-size: 1.8em;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .progress-bar {
            background: #2c3e50;
            height: 15px;
            border-radius: 0;
            overflow: hidden;
            margin-top: 15px;
            border: 2px solid #000;
        }

        .progress-fill {
            background: #e74c3c;
            height: 100%;
            transition: width 0.3s;
        }

        .question-card {
            background: #fff;
            padding: 25px;
            border-radius: 0;
            margin-bottom: 20px;
            border: 3px solid #34495e;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.2);
        }

        .question-number {
            color: #e74c3c;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .question-text {
            font-size: 1.2em;
            color: #2c3e50;
            margin-bottom: 20px;
            line-height: 1.6;
            font-weight: bold;
        }

        .options {
            list-style: none;
        }

        .option {
            background: #ecf0f1;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 0;
            border: 3px solid #34495e;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 3px 3px 0 rgba(0,0,0,0.2);
        }

        .option:hover {
            background: #3498db;
            color: white;
            transform: translate(-2px, -2px);
            box-shadow: 5px 5px 0 rgba(0,0,0,0.3);
        }

        .option.selected {
            border-color: #3498db;
            background: #3498db;
            color: white;
        }

        .option.correct {
            border-color: #27ae60;
            background: #2ecc71;
            color: white;
        }

        .option.incorrect {
            border-color: #c0392b;
            background: #e74c3c;
            color: white;
        }

        .option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 0;
            display: none;
            border: 3px solid;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #d4edda;
            border-color: #27ae60;
            color: #155724;
        }

        .feedback.incorrect {
            background: #f8d7da;
            border-color: #c0392b;
            color: #721c24;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            justify-content: space-between;
        }

        .btn {
            padding: 12px 30px;
            border: 3px solid #2c3e50;
            border-radius: 0;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.2s;
            font-weight: 600;
            font-family: 'Courier New', Courier, monospace;
            text-transform: uppercase;
            box-shadow: 3px 3px 0 rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: translate(-2px, -2px);
            box-shadow: 5px 5px 0 rgba(0,0,0,0.3);
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-success:hover {
            background: #229954;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .score-display {
            background: #34495e;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 0;
            text-align: center;
            margin-bottom: 20px;
            border: 3px solid #2c3e50;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.2);
        }

        .score-display h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .score-display .score {
            font-size: 3em;
            font-weight: bold;
            color: #e74c3c;
        }

        .notes-section {
            margin-top: 30px;
            padding: 20px;
            background: #f39c12;
            border-radius: 0;
            border: 3px solid #d68910;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.2);
        }

        .notes-section h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            text-transform: uppercase;
            font-size: 1.2em;
        }

        .notes-section textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 3px solid #2c3e50;
            border-radius: 0;
            font-family: 'Courier New', Courier, monospace;
            font-size: 1em;
            resize: vertical;
            background: #fff;
        }

        .notes-section .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .saved-notes {
            margin-top: 20px;
            padding: 15px;
            background: #fff;
            border-radius: 0;
            max-height: 300px;
            overflow-y: auto;
            border: 3px solid #34495e;
        }

        .note-item {
            padding: 10px;
            margin-bottom: 10px;
            background: #ecf0f1;
            border-radius: 0;
            border: 2px solid #34495e;
        }

        .note-item .note-lecture {
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .note-item .note-text {
            color: #2c3e50;
        }

        .note-item .note-date {
            font-size: 0.9em;
            color: #7f8c8d;
            margin-top: 5px;
            font-style: italic;
        }

        .shop-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #f39c12;
            color: #2c3e50;
            padding: 15px 30px;
            border: 4px solid #d68910;
            cursor: pointer;
            font-size: 1.3em;
            font-weight: bold;
            font-family: 'Courier New', Courier, monospace;
            text-transform: uppercase;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.3);
            z-index: 9999;
            transition: all 0.2s;
            animation: shopPulse 2s infinite;
        }

        .shop-btn:hover {
            transform: translate(-2px, -2px);
            box-shadow: 7px 7px 0 rgba(0,0,0,0.4);
        }

        @keyframes shopPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .shop-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 80, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10001;
            animation: fadeIn 0.3s;
            overflow-y: auto;
            padding: 20px;
        }

        .shop-modal.active {
            display: flex;
        }

        .shop-content {
            background: #ecf0f1;
            border: 5px solid #34495e;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.4);
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .shop-header {
            background: #34495e;
            color: #ecf0f1;
            padding: 20px;
            border-bottom: 5px solid #2c3e50;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .shop-header h2 {
            font-size: 2em;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .shop-balance {
            font-size: 1.5em;
            color: #f39c12;
            font-weight: bold;
        }

        .shop-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #e74c3c;
            color: white;
            border: 3px solid #c0392b;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Courier New', Courier, monospace;
        }

        .shop-close:hover {
            background: #c0392b;
        }

        .shop-tabs {
            display: flex;
            background: #bdc3c7;
            border-bottom: 3px solid #34495e;
        }

        .shop-tab {
            flex: 1;
            padding: 15px;
            background: #95a5a6;
            border: none;
            border-right: 3px solid #34495e;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Courier New', Courier, monospace;
            text-transform: uppercase;
            transition: all 0.2s;
        }

        .shop-tab:hover {
            background: #7f8c8d;
        }

        .shop-tab.active {
            background: #ecf0f1;
        }

        .shop-items {
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .shop-item {
            background: white;
            border: 3px solid #34495e;
            padding: 20px;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.2);
            transition: all 0.2s;
        }

        .shop-item:hover {
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0 rgba(0,0,0,0.3);
        }

        .shop-item.owned {
            background: #d4edda;
            border-color: #27ae60;
        }

        .shop-item.equipped {
            background: #fff3cd;
            border-color: #f39c12;
            position: relative;
        }

        .shop-item.equipped::before {
            content: 'EQUIPPED';
            position: absolute;
            top: 10px;
            right: 10px;
            background: #f39c12;
            color: #2c3e50;
            padding: 5px 10px;
            font-size: 0.7em;
            font-weight: bold;
            border: 2px solid #d68910;
        }

        .item-icon {
            font-size: 3em;
            text-align: center;
            margin-bottom: 10px;
        }

        .item-name {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 5px;
            color: #2c3e50;
            text-transform: uppercase;
        }

        .item-description {
            color: #34495e;
            margin-bottom: 10px;
            font-size: 0.9em;
            min-height: 40px;
        }

        .item-price {
            font-size: 1.3em;
            color: #e74c3c;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .item-btn {
            width: 100%;
            padding: 10px;
            background: #3498db;
            color: white;
            border: 3px solid #2980b9;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Courier New', Courier, monospace;
            text-transform: uppercase;
            transition: all 0.2s;
        }

        .item-btn:hover {
            background: #2980b9;
        }

        .item-btn:disabled {
            background: #95a5a6;
            border-color: #7f8c8d;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .item-btn.equip {
            background: #f39c12;
            border-color: #d68910;
        }

        .item-btn.equip:hover {
            background: #d68910;
        }

        .inventory-display {
            position: fixed;
            top: 100px;
            left: 20px;
            background: #34495e;
            color: #ecf0f1;
            padding: 15px;
            border: 3px solid #2c3e50;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.3);
            z-index: 9998;
            font-family: 'Courier New', Courier, monospace;
            max-width: 200px;
        }

        .inventory-display h4 {
            margin-bottom: 10px;
            color: #f39c12;
            text-transform: uppercase;
            border-bottom: 2px solid #f39c12;
            padding-bottom: 5px;
        }

        .inventory-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 5px 0;
            padding: 5px;
            background: #2c3e50;
            border: 2px solid #1a252f;
        }

        .inventory-icon {
            font-size: 1.5em;
        }

        .power-up-active {
            animation: powerUpGlow 1s infinite;
        }

        @keyframes powerUpGlow {
            0%, 100% { box-shadow: 0 0 10px #f39c12; }
            50% { box-shadow: 0 0 20px #f39c12, 0 0 30px #f39c12; }
        }

        @keyframes screenShake {
            0%, 100% { transform: translate(0, 0); }
            10%, 30%, 50%, 70%, 90% { transform: translate(-5px, 5px); }
            20%, 40%, 60%, 80% { transform: translate(5px, -5px); }
        }

        @keyframes screenFlash {
            0% { opacity: 0; }
            50% { opacity: 0.8; }
            100% { opacity: 0; }
        }

        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
        }

        .screen-flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9997;
            animation: screenFlash 0.3s;
        }

        .screen-flash.correct {
            background: radial-gradient(circle, rgba(39, 174, 96, 0.8) 0%, rgba(39, 174, 96, 0) 70%);
        }

        .screen-flash.incorrect {
            background: radial-gradient(circle, rgba(192, 57, 43, 0.8) 0%, rgba(192, 57, 43, 0) 70%);
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            pointer-events: none;
            z-index: 10000;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .score-popup {
            position: fixed;
            font-size: 3em;
            font-weight: bold;
            font-family: 'Courier New', Courier, monospace;
            z-index: 9999;
            pointer-events: none;
            text-shadow: 3px 3px 0 rgba(0,0,0,0.3);
            animation: scoreFloat 1.5s forwards;
        }

        @keyframes scoreFloat {
            0% {
                transform: translateY(0) scale(0.5);
                opacity: 0;
            }
            20% {
                transform: translateY(-20px) scale(1.2);
                opacity: 1;
            }
            100% {
                transform: translateY(-150px) scale(0.8);
                opacity: 0;
            }
        }

        .mega-combo {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5em;
            font-weight: bold;
            color: #f39c12;
            text-shadow: 
                3px 3px 0 #e74c3c,
                6px 6px 0 rgba(0,0,0,0.3);
            z-index: 9998;
            pointer-events: none;
            animation: megaComboAppear 2s;
            font-family: 'Courier New', Courier, monospace;
        }

        @keyframes megaComboAppear {
            0% {
                transform: translate(-50%, -50%) scale(0) rotate(-180deg);
                opacity: 0;
            }
            30% {
                transform: translate(-50%, -50%) scale(1.3) rotate(10deg);
                opacity: 1;
            }
            60% {
                transform: translate(-50%, -50%) scale(0.9) rotate(-5deg);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(0) rotate(0deg);
                opacity: 0;
            }
        }

        .star-burst {
            position: fixed;
            width: 20px;
            height: 20px;
            background: #f39c12;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            pointer-events: none;
            z-index: 10000;
        }

        @keyframes starBurst {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: scale(3) rotate(180deg);
                opacity: 0;
            }
        }

        .lightning-effect {
            position: fixed;
            width: 5px;
            height: 100vh;
            background: linear-gradient(to bottom, 
                transparent 0%, 
                #f39c12 20%, 
                #fff 50%, 
                #f39c12 80%, 
                transparent 100%);
            pointer-events: none;
            z-index: 9997;
            animation: lightning 0.1s;
            box-shadow: 0 0 20px #f39c12, 0 0 40px #f39c12;
        }

        @keyframes lightning {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        .ripple {
            position: fixed;
            border: 3px solid #27ae60;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9997;
            animation: rippleExpand 1s;
        }

        @keyframes rippleExpand {
            0% {
                width: 0;
                height: 0;
                opacity: 1;
            }
            100% {
                width: 300px;
                height: 300px;
                opacity: 0;
            }
        }

        .fire-particle {
            position: fixed;
            width: 8px;
            height: 8px;
            background: #e74c3c;
            border-radius: 50%;
            pointer-events: none;
            z-index: 10000;
            box-shadow: 0 0 10px #e74c3c;
        }

        @keyframes fireRise {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-200px) scale(0);
                opacity: 0;
            }
        }

        .xp-bar-fill {
            animation: xpFillPulse 0.5s;
        }

        @keyframes xpFillPulse {
            0%, 100% { transform: scaleX(1); }
            50% { transform: scaleX(1.02); }
        }

        .question-card {
            animation: questionSlideIn 0.5s;
        }

        @keyframes questionSlideIn {
            from {
                transform: translateX(100px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .stats-panel {
            animation: statsGlow 2s infinite;
        }

        @keyframes statsGlow {
            0%, 100% { box-shadow: 5px 5px 0 rgba(0,0,0,0.2); }
            50% { box-shadow: 5px 5px 0 rgba(0,0,0,0.2), 0 0 20px rgba(231, 76, 60, 0.3); }
        }

        .leaderboard-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: #e74c3c;
            color: white;
            padding: 15px 30px;
            border: 4px solid #c0392b;
            cursor: pointer;
            font-size: 1.3em;
            font-weight: bold;
            font-family: 'Courier New', Courier, monospace;
            text-transform: uppercase;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.3);
            z-index: 9999;
            transition: all 0.2s;
            animation: leaderboardPulse 3s infinite;
        }

        .leaderboard-btn:hover {
            transform: translate(-2px, -2px);
            box-shadow: 7px 7px 0 rgba(0,0,0,0.4);
        }

        @keyframes leaderboardPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }

        .leaderboard-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 80, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10002;
            animation: fadeIn 0.3s;
            overflow-y: auto;
            padding: 20px;
        }

        .leaderboard-modal.active {
            display: flex;
        }

        .leaderboard-content {
            background: #ecf0f1;
            border: 5px solid #34495e;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.4);
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .leaderboard-header {
            background: #e74c3c;
            color: white;
            padding: 20px;
            border-bottom: 5px solid #c0392b;
            text-align: center;
            position: relative;
        }

        .leaderboard-header h2 {
            font-size: 2.5em;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 10px;
        }

        .leaderboard-subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .leaderboard-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #c0392b;
            color: white;
            border: 3px solid #a93226;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.2em;
            z-index: 10;
            transition: all 0.2s;
        }

        .leaderboard-close:hover {
            background: #a93226;
            transform: scale(1.1);
        }

        .leaderboard-tabs {
            display: flex;
            background: #bdc3c7;
            border-bottom: 3px solid #34495e;
        }

        .leaderboard-tab {
            flex: 1;
            padding: 15px;
            background: #95a5a6;
            border: none;
            border-right: 3px solid #34495e;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Courier New', Courier, monospace;
            text-transform: uppercase;
            transition: all 0.2s;
        }

        .leaderboard-tab:hover {
            background: #7f8c8d;
        }

        .leaderboard-tab.active {
            background: #ecf0f1;
        }

        .leaderboard-list {
            padding: 20px;
        }

        .leaderboard-entry {
            background: white;
            border: 3px solid #34495e;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 3px 3px 0 rgba(0,0,0,0.2);
            transition: all 0.2s;
        }

        .leaderboard-entry:hover {
            transform: translate(-2px, -2px);
            box-shadow: 5px 5px 0 rgba(0,0,0,0.3);
        }

        .leaderboard-entry.top1 {
            background: linear-gradient(135deg, #f1c40f 0%, #f39c12 100%);
            border-color: #d68910;
            animation: topRankGlow 2s infinite;
        }

        .leaderboard-entry.top2 {
            background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%);
            border-color: #7f8c8d;
        }

        .leaderboard-entry.top3 {
            background: linear-gradient(135deg, #cd7f32 0%, #b87333 100%);
            border-color: #8b5a2b;
        }

        .leaderboard-entry.current-user {
            background: #d4edda;
            border-color: #27ae60;
            font-weight: bold;
        }

        @keyframes topRankGlow {
            0%, 100% { box-shadow: 3px 3px 0 rgba(0,0,0,0.2), 0 0 10px #f39c12; }
            50% { box-shadow: 5px 5px 0 rgba(0,0,0,0.3), 0 0 20px #f39c12; }
        }

        .rank-number {
            font-size: 2em;
            font-weight: bold;
            color: #2c3e50;
            min-width: 50px;
            text-align: center;
        }

        .rank-icon {
            font-size: 2.5em;
            min-width: 50px;
            text-align: center;
        }

        .player-info {
            flex: 1;
        }

        .player-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .player-stats {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            font-size: 0.9em;
            color: #34495e;
        }

        .stat-badge {
            background: #34495e;
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
            border: 2px solid #2c3e50;
        }

        .username-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 80, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10003;
            animation: fadeIn 0.3s;
        }

        .username-modal.active {
            display: flex;
        }

        .username-content {
            background: #ecf0f1;
            border: 5px solid #34495e;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.4);
            padding: 40px;
            max-width: 500px;
            width: 90%;
        }

        .username-content h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            text-align: center;
            font-size: 2em;
            text-transform: uppercase;
        }

        .username-content input {
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            border: 3px solid #34495e;
            font-family: 'Courier New', Courier, monospace;
            margin-bottom: 20px;
            background: white;
        }

        .username-content input:focus {
            outline: none;
            border-color: #e74c3c;
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.3);
        }

        .global-stats {
            background: #34495e;
            color: white;
            padding: 20px;
            margin: 20px;
            border: 3px solid #2c3e50;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.2);
        }

        .global-stats h3 {
            color: #f39c12;
            margin-bottom: 15px;
            text-align: center;
            text-transform: uppercase;
        }

        .global-stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .global-stat-item {
            background: #2c3e50;
            padding: 15px;
            border: 2px solid #1a252f;
            text-align: center;
        }

        .global-stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 5px;
        }

        .global-stat-label {
            font-size: 0.9em;
            color: #bdc3c7;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
                font-size: 14px;
            }
            
            .container {
                box-shadow: 4px 4px 0 4px rgba(0,0,0,0.3);
            }
            
            .header h1 {
                font-size: 1.5em;
                letter-spacing: 1px;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .creator-credit {
                font-size: 0.7em;
                bottom: 5px;
                right: 10px;
            }
            
            .main-content {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 5px solid #34495e;
                padding: 15px;
            }
            
            .sidebar h3 {
                font-size: 1em;
            }
            
            .lecture-btn {
                padding: 12px;
                font-size: 0.9em;
            }

            .content-area {
                padding: 15px;
            }
            
            .quiz-header h2 {
                font-size: 1.3em;
            }
            
            .question-card {
                padding: 15px;
            }
            
            .question-text {
                font-size: 1em;
            }
            
            .option {
                padding: 12px;
                font-size: 0.9em;
            }

            .controls {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn {
                width: 100%;
                padding: 12px 20px;
                font-size: 0.9em;
            }
            
            .stats-panel {
                padding: 12px;
                font-size: 0.9em;
            }
            
            .stat-item {
                font-size: 0.9em;
            }
            
            .streak-counter {
                top: 70px;
                left: 10px;
                padding: 10px 15px;
                font-size: 1em;
                z-index: 9999;
            }
            
            .achievement-popup {
                top: 10px;
                right: 10px;
                font-size: 0.9em;
                padding: 15px 20px;
                max-width: 80%;
            }
            
            .combo-text {
                font-size: 2.5em;
            }
            
            .mega-combo {
                font-size: 3em;
            }
            
            .score-popup {
                font-size: 2em;
            }
            
            .inventory-display {
                top: auto;
                bottom: 80px;
                left: 10px;
                font-size: 0.75em;
                padding: 10px;
                max-width: 150px;
            }
            
            .inventory-item {
                padding: 3px;
                margin: 3px 0;
            }
            
            .inventory-icon {
                font-size: 1.2em;
            }
            
            .shop-btn {
                bottom: 10px;
                right: 10px;
                padding: 12px 20px;
                font-size: 1em;
                z-index: 9999;
            }
            
            .shop-items {
                grid-template-columns: 1fr;
                padding: 15px;
                gap: 15px;
            }
            
            .shop-content {
                max-width: 100%;
                max-height: 85vh;
            }
            
            .shop-header h2 {
                font-size: 1.5em;
            }
            
            .shop-balance {
                font-size: 1.2em;
            }
            
            .shop-tab {
                padding: 12px 8px;
                font-size: 0.85em;
            }
            
            .shop-item {
                padding: 15px;
            }
            
            .item-icon {
                font-size: 2.5em;
            }
            
            .item-name {
                font-size: 1em;
            }
            
            .item-description {
                font-size: 0.85em;
            }
            
            .notes-section {
                padding: 15px;
            }
            
            .notes-section h3 {
                font-size: 1em;
            }
            
            .notes-section textarea {
                min-height: 100px;
                font-size: 0.9em;
            }
            
            .welcome-screen h2 {
                font-size: 1.5em;
            }
            
            .welcome-screen p {
                font-size: 0.95em;
            }
            
            .score-display {
                padding: 15px;
            }
            
            .score-display h3 {
                font-size: 1.2em;
            }
            
            .score-display .score {
                font-size: 2em;
            }
            
            .leaderboard-btn {
                bottom: 10px;
                left: 10px;
                padding: 10px 20px;
                font-size: 0.95em;
            }
            
            .leaderboard-header h2 {
                font-size: 1.8em;
            }
            
            .leaderboard-subtitle {
                font-size: 0.95em;
            }
            
            .leaderboard-tab {
                padding: 12px 8px;
                font-size: 0.85em;
            }
            
            .leaderboard-entry {
                padding: 12px;
                gap: 10px;
            }
            
            .rank-number {
                font-size: 1.5em;
                min-width: 40px;
            }
            
            .rank-icon {
                font-size: 2em;
                min-width: 40px;
            }
            
            .player-name {
                font-size: 1.1em;
            }
            
            .player-stats {
                font-size: 0.8em;
                gap: 8px;
            }
            
            .stat-badge {
                padding: 2px 6px;
                font-size: 0.85em;
            }
            
            .global-stats {
                padding: 15px;
                margin: 15px;
            }
            
            .global-stat-item {
                padding: 10px;
            }
            
            .global-stat-value {
                font-size: 1.5em;
            }
            
            .username-content {
                padding: 30px 20px;
            }
            
            .username-content h2 {
                font-size: 1.5em;
            }
            
            .username-content input {
                padding: 12px;
                font-size: 1em;
            }
        }

        .achievement-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #f39c12;
            color: #2c3e50;
            padding: 20px 30px;
            border: 4px solid #d68910;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.3);
            z-index: 9999;
            animation: slideInRight 0.5s, pulse 0.5s 0.5s;
            font-family: 'Courier New', Courier, monospace;
            font-weight: bold;
            font-size: 1.2em;
            text-transform: uppercase;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px #e74c3c; }
            50% { box-shadow: 0 0 20px #e74c3c, 0 0 30px #e74c3c; }
        }

        .streak-counter {
            position: fixed;
            top: 20px;
            left: 20px;
            background: #27ae60;
            color: white;
            padding: 15px 25px;
            border: 4px solid #229954;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.3);
            z-index: 9999;
            font-family: 'Courier New', Courier, monospace;
            font-weight: bold;
            font-size: 1.5em;
            animation: glow 2s infinite;
        }

        .streak-counter.fire {
            animation: glow 2s infinite, bounce 0.5s infinite;
        }

        .combo-text {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4em;
            font-weight: bold;
            color: #e74c3c;
            text-shadow: 4px 4px 0 rgba(0,0,0,0.3);
            z-index: 9998;
            animation: comboAppear 1s;
            pointer-events: none;
            font-family: 'Courier New', Courier, monospace;
        }

        @keyframes comboAppear {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0;
            }
        }

        .stats-panel {
            background: #34495e;
            color: #ecf0f1;
            padding: 15px;
            border: 3px solid #2c3e50;
            margin-bottom: 20px;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.2);
        }

        .stats-panel h3 {
            margin-bottom: 10px;
            text-transform: uppercase;
            color: #e74c3c;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid #2c3e50;
        }

        .level-bar {
            width: 100%;
            height: 20px;
            background: #2c3e50;
            border: 2px solid #000;
            margin-top: 10px;
            position: relative;
        }

        .level-fill {
            height: 100%;
            background: #e74c3c;
            transition: width 0.5s;
        }

        .level-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 0.9em;
        }

        .particle {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #e74c3c;
            border-radius: 50%;
            pointer-events: none;
            animation: particleFloat 1s forwards;
            z-index: 10000;
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) scale(0);
                opacity: 0;
            }
        }

        .sync-status {
            position: fixed;
            bottom: 90px;
            right: 20px;
            background: #34495e;
            color: white;
            padding: 10px 15px;
            border: 3px solid #2c3e50;
            border-radius: 5px;
            font-size: 0.9em;
            z-index: 9999;
            display: none;
        }

        .sync-status.syncing {
            background: #f39c12;
            display: block;
        }

        .sync-status.synced {
            background: #27ae60;
            display: block;
        }

        .sync-status.error {
            background: #e74c3c;
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Oral Surgery MCQ Quiz</h1>
            <p>Medical Management - Cardiovascular, Endocrine & Metabolic Diseases</p>
            <div class="creator-credit">
                Created by<br>
                <strong>Abdullah Asaad Ghali</strong>
            </div>
        </div>

        <!-- Shop Button -->
        <button class="shop-btn" onclick="openShop()">
            üõí SHOP
        </button>

        <!-- Leaderboard Button -->
        <button class="leaderboard-btn" onclick="openLeaderboard()">
            üèÜ RANKS
        </button>

        <!-- Sync Status -->
        <div class="sync-status" id="syncStatus">
            <span id="syncText">Syncing...</span>
        </div>

        <!-- Inventory Display -->
        <div class="inventory-display" id="inventoryDisplay" style="display: none;">
            <h4>Inventory</h4>
            <div id="inventoryItems"></div>
        </div>

        <!-- Username Modal -->
        <div class="username-modal" id="usernameModal">
            <div class="username-content">
                <h2>Enter Your Name</h2>
                <p style="text-align: center; margin-bottom: 20px; color: #34495e;">Join the global competition!</p>
                <input type="text" id="usernameInput" placeholder="Enter your username..." maxlength="20">
                <button class="btn btn-primary" onclick="saveUsername()" style="width: 100%;">
                    START COMPETING
                </button>
            </div>
        </div>

        <!-- Leaderboard Modal -->
        <div class="leaderboard-modal" id="leaderboardModal">
            <div class="leaderboard-content">
                <button class="leaderboard-close" onclick="closeLeaderboard()">‚úï</button>
                <div class="leaderboard-header">
                    <h2>üèÜ LEADERBOARD</h2>
                    <p class="leaderboard-subtitle">Global Rankings</p>
                </div>
                
                <div class="leaderboard-tabs">
                    <button class="leaderboard-tab active" onclick="switchLeaderboardTab('global')">Global</button>
                    <button class="leaderboard-tab" onclick="switchLeaderboardTab('weekly')">This Week</button>
                </div>

                <div class="global-stats">
                    <h3>Global Statistics</h3>
                    <div class="global-stat-grid">
                        <div class="global-stat-item">
                            <div class="global-stat-value" id="totalPlayers">0</div>
                            <div class="global-stat-label">Total Players</div>
                        </div>
                        <div class="global-stat-item">
                            <div class="global-stat-value" id="totalQuestions">0</div>
                            <div class="global-stat-label">Questions Answered</div>
                        </div>
                        <div class="global-stat-item">
                            <div class="global-stat-value" id="avgLevel">0</div>
                            <div class="global-stat-label">Average Level</div>
                        </div>
                        <div class="global-stat-item">
                            <div class="global-stat-value" id="bestStreak">0</div>
                            <div class="global-stat-label">Best Streak</div>
                        </div>
                    </div>
                </div>

                <div class="leaderboard-list" id="leaderboardList">
                    <!-- Populated by JavaScript -->
                </div>

                <div style="padding: 20px; text-align: center; border-top: 3px solid #34495e; background: #ecf0f1;">
                    <button class="btn btn-secondary" onclick="closeLeaderboard()" style="width: 100%; max-width: 300px; padding: 15px; font-size: 1.1em;">
                        CLOSE
                    </button>
                </div>
            </div>
        </div>

        <!-- Shop Modal -->
        <div class="shop-modal" id="shopModal">
            <div class="shop-content">
                <button class="shop-close" onclick="closeShop()">‚úï</button>
                <div class="shop-header">
                    <h2>üõí Item Shop</h2>
                    <div class="shop-balance">
                        XP: <span id="shopXP">0</span>
                    </div>
                </div>
                <div class="shop-tabs">
                    <button class="shop-tab active" onclick="switchShopTab('cosmetics')">Cosmetics</button>
                    <button class="shop-tab" onclick="switchShopTab('powerups')">Power-Ups</button>
                    <button class="shop-tab" onclick="switchShopTab('titles')">Titles</button>
                </div>
                <div class="shop-items" id="shopItems">
                    <!-- Items will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <div class="main-content">
            <aside class="sidebar">
                <h3 style="margin-bottom: 20px; color: #2c3e50;">üìö Select a Lecture</h3>
                <ul class="lecture-list">
                    <li class="lecture-item">
                        <button class="lecture-btn" data-lecture="1">
                            Hypertension & Blood Pressure Management
                        </button>
                    </li>
                    <li class="lecture-item">
                        <button class="lecture-btn" data-lecture="2">
                            Ischemic Heart Disease & Myocardial Infarction
                        </button>
                    </li>
                    <li class="lecture-item">
                        <button class="lecture-btn" data-lecture="3">
                            Heart Failure & Cardiac Arrhythmias
                        </button>
                    </li>
                    <li class="lecture-item">
                        <button class="lecture-btn" data-lecture="4">
                            Infective Endocarditis & Rheumatic Heart Disease
                        </button>
                    </li>
                    <li class="lecture-item">
                        <button class="lecture-btn" data-lecture="5">
                            Congenital Heart Disease
                        </button>
                    </li>
                    <li class="lecture-item">
                        <button class="lecture-btn" data-lecture="6">
                            Thyroid Diseases
                        </button>
                    </li>
                    <li class="lecture-item">
                        <button class="lecture-btn" data-lecture="7">
                            Adrenal Gland Disorders
                        </button>
                    </li>
                    <li class="lecture-item">
                        <button class="lecture-btn" data-lecture="8">
                            Diabetes Mellitus
                        </button>
                    </li>
                </ul>

                <div class="notes-section" style="margin-top: 30px;">
                    <h3>üìù Quick Notes</h3>
                    <textarea id="noteInput" placeholder="Write your notes here..."></textarea>
                    <div class="btn-group">
                        <button class="btn btn-success" onclick="saveNote()">Save Note</button>
                        <button class="btn btn-secondary" onclick="clearNote()">Clear</button>
                    </div>
                </div>
            </aside>

            <main class="content-area">
                <div class="welcome-screen" id="welcomeScreen">
                    <h2>Welcome to Oral Surgery MCQ Quiz!</h2>
                    <p>Select a lecture from the sidebar to begin testing your knowledge.</p>
                    <p style="margin-top: 20px;">This quiz covers:</p>
                    <ul style="list-style: none; margin-top: 15px; color: #666;">
                        <li>‚Ä¢ Cardiovascular Diseases & Management</li>
                        <li>‚Ä¢ Hypertension & Ischemic Heart Disease</li>
                        <li>‚Ä¢ Heart Failure & Arrhythmias</li>
                        <li>‚Ä¢ Infective Endocarditis Prevention</li>
                        <li>‚Ä¢ Congenital & Rheumatic Heart Disease</li>
                        <li>‚Ä¢ Thyroid Disorders (Hyper/Hypothyroidism)</li>
                        <li>‚Ä¢ Adrenal Insufficiency & Cushing Syndrome</li>
                        <li>‚Ä¢ Diabetes Mellitus Type 1 & 2</li>
                    </ul>

                    <div class="saved-notes" id="savedNotesList" style="margin-top: 40px;">
                        <h3 style="color: #2c3e50; margin-bottom: 15px;">üìí Your Saved Notes</h3>
                        <div id="notesContainer"></div>
                    </div>
                </div>

                <div class="quiz-container" id="quizContainer">
                    <!-- Streak Counter -->
                    <div class="streak-counter" id="streakCounter" style="display: none;">
                        üî• STREAK: <span id="streakNumber">0</span>
                    </div>
                    
                    <!-- Stats Panel -->
                    <div class="stats-panel" id="statsPanel">
                        <h3>üìä Your Progress</h3>
                        <div class="stat-item">
                            <span>Level:</span>
                            <span id="levelDisplay">1</span>
                        </div>
                        <div class="stat-item">
                            <span>Total XP:</span>
                            <span id="xpDisplay">0</span>
                        </div>
                        <div class="stat-item">
                            <span>Correct Answers:</span>
                            <span id="correctDisplay">0</span>
                        </div>
                        <div class="stat-item">
                            <span>Best Streak:</span>
                            <span id="bestStreakDisplay">0</span>
                        </div>
                        <div class="level-bar">
                            <div class="level-fill" id="levelFill"></div>
                            <div class="level-text" id="levelText">0 / 100 XP</div>
                        </div>
                    </div>
                    
                    <div class="quiz-header">
                        <h2 id="quizTitle"></h2>
                        <p id="quizProgress"></p>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                    </div>

                    <div id="scoreDisplay" class="score-display" style="display: none;">
                        <h3>Quiz Complete!</h3>
                        <div class="score" id="finalScore"></div>
                        <p id="scoreMessage"></p>
                        <div id="bonusXP" style="margin-top: 15px; font-size: 1.2em; color: #f39c12;"></div>
                    </div>

                    <div id="questionContainer"></div>

                    <div class="controls">
                        <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()">‚¨Ö Previous</button>
                        <div>
                            <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()">Next ‚û°</button>
                            <button class="btn btn-success" id="submitBtn" onclick="submitQuiz()" style="display: none;">‚úì Submit Quiz</button>
                        </div>
                    </div>

                    <button class="btn btn-secondary" onclick="backToHome()" style="margin-top: 20px;">üè† Back to Lectures</button>
                </div>
            </main>
        </div>
    </div>

    <script>
        // GitHub Gist Configuration - REPLACE THESE VALUES
        const GITHUB_CONFIG = {
            gistId: 'YOUR_GIST_ID_HERE', // Create a gist at gist.github.com and paste ID here
            token: 'YOUR_GITHUB_TOKEN_HERE', // Create personal access token with gist scope
            filename: 'leaderboard.json'
        };

        // Complete Quiz Data with ALL MCQs - 100% Coverage
        const quizData = {
            1: {
                title: "Hypertension & Blood Pressure Management",
                questions: [
                    {
                        question: "What is the definition of hypertension in adults?",
                        options: [
                            "Systolic ‚â•120 mmHg or diastolic ‚â•70 mmHg",
                            "Systolic ‚â•130 mmHg or diastolic ‚â•80 mmHg",
                            "Systolic ‚â•140 mmHg or diastolic ‚â•90 mmHg",
                            "Systolic ‚â•150 mmHg or diastolic ‚â•100 mmHg"
                        ],
                        correct: 1,
                        explanation: "According to current guidelines, hypertension is defined as a sustained systolic blood pressure of 130 mmHg or greater and/or a sustained diastolic blood pressure of 80 mmHg or greater."
                    },
                    {
                        question: "What percentage of hypertension cases are primary/essential hypertension?",
                        options: [
                            "50%",
                            "70%",
                            "90%",
                            "95%"
                        ],
                        correct: 2,
                        explanation: "Primary/essential hypertension accounts for about 90% of all cases presenting with high blood pressure with no readily identifiable cause."
                    },
                    {
                        question: "Which of the following is NOT a cause of secondary hypertension?",
                        options: [
                            "Pheochromocytoma",
                            "Genetic factors",
                            "Cushing's syndrome",
                            "Chronic NSAID therapy"
                        ],
                        correct: 1,
                        explanation: "Genetic factors are associated with primary hypertension. Secondary hypertension has identifiable causes such as pheochromocytoma, Cushing's syndrome, and chronic NSAID therapy."
                    },
                    {
                        question: "For every increase in BP of 20 mmHg systolic and 10 mmHg diastolic, the risk of death related to ischemic heart disease and stroke:",
                        options: [
                            "Increases by 50%",
                            "Doubles",
                            "Triples",
                            "Quadruples"
                        ],
                        correct: 1,
                        explanation: "For every increase in BP of 20 mm Hg systolic and 10 mm Hg diastolic, the risk of death related to ischemic heart disease and stroke doubles."
                    },
                    {
                        question: "What is pulse pressure?",
                        options: [
                            "The average pressure in arteries",
                            "The difference between systolic and diastolic pressures",
                            "The pressure during ventricular contraction",
                            "The pressure during ventricular relaxation"
                        ],
                        correct: 1,
                        explanation: "Pulse pressure is the difference between systolic and diastolic pressures."
                    },
                    {
                        question: "How is mean arterial pressure roughly defined?",
                        options: [
                            "Average of systolic and diastolic",
                            "Systolic minus diastolic",
                            "Sum of diastolic pressure plus one-third the pulse pressure",
                            "Two times systolic plus diastolic divided by three"
                        ],
                        correct: 2,
                        explanation: "Mean arterial pressure is roughly defined as the sum of the diastolic pressure plus one-third the pulse pressure."
                    },
                    {
                        question: "What lifestyle factor is NOT a significant contributor to hypertension?",
                        options: [
                            "Obesity",
                            "Excessive dietary sodium",
                            "Physical inactivity",
                            "Low protein intake"
                        ],
                        correct: 3,
                        explanation: "Low protein intake is not a significant contributor. Obesity, excessive sodium, excessive alcohol, and physical inactivity are significant factors."
                    },
                    {
                        question: "What should be avoided for 30 minutes before blood pressure measurement?",
                        options: [
                            "Eating and smoking",
                            "Drinking water",
                            "Standing",
                            "Talking"
                        ],
                        correct: 0,
                        explanation: "Patient should not have eaten or smoked for 30 minutes before BP measurement."
                    },
                    {
                        question: "How long should a patient sit comfortably before BP measurement?",
                        options: [
                            "1 minute",
                            "3 minutes",
                            "At least 5 minutes",
                            "10 minutes"
                        ],
                        correct: 2,
                        explanation: "The patient should be comfortably seated without legs crossed for at least 5 minutes before measurement."
                    },
                    {
                        question: "Where should the sphygmomanometer cuff be centered?",
                        options: [
                            "On the wrist",
                            "Above the brachial artery with 3 cm visible at antecubital fossa",
                            "Directly on the elbow",
                            "On the forearm"
                        ],
                        correct: 1,
                        explanation: "The cuff is placed on the upper arm with about 3 cm of skin visible at the antecubital fossa, centered above the brachial artery."
                    },
                    {
                        question: "What are Korotkoff sounds?",
                        options: [
                            "Heart murmurs",
                            "Tapping sounds indicating systolic pressure",
                            "Breathing sounds",
                            "Arterial bruits"
                        ],
                        correct: 1,
                        explanation: "Korotkoff sounds are the first tapping sounds that appear when measuring blood pressure, indicating systolic pressure."
                    },
                    {
                        question: "What indicates diastolic pressure during BP measurement?",
                        options: [
                            "When sounds first appear",
                            "When sounds become loudest",
                            "When sounds become muffled and disappear",
                            "When pulse is felt"
                        ],
                        correct: 2,
                        explanation: "Diastolic pressure is recorded when tapping sounds become muffled and then disappear."
                    },
                    {
                        question: "What percentage of NSAIDs use reduction helps control hypertension?",
                        options: [
                            "NSAIDs for >2 weeks interfere with antihypertensive effectiveness",
                            "NSAIDs have no effect",
                            "NSAIDs improve control",
                            "Only COX-2 inhibitors interfere"
                        ],
                        correct: 0,
                        explanation: "Long-term use (>2 weeks) of NSAIDs may interfere with effectiveness of some antihypertensive medications."
                    },
                    {
                        question: "Which ACE inhibitor side effect is relevant to dentistry?",
                        options: [
                            "Gingival hyperplasia",
                            "Non-allergic angioedema and burning mouth",
                            "Xerostomia only",
                            "Tooth discoloration"
                        ],
                        correct: 1,
                        explanation: "ACE inhibitors may cause neutropenia, non-allergic angioedema, and burning mouth syndrome."
                    },
                    {
                        question: "What is the BP classification for 125/78 mmHg?",
                        options: [
                            "Normal",
                            "Elevated",
                            "Stage 1",
                            "Stage 2"
                        ],
                        correct: 1,
                        explanation: "BP ‚â•120/80 but <130/80 is classified as Elevated hypertension."
                    },
                    {
                        question: "What is the recommended dental management for a patient with BP ‚â•180/110 mmHg?",
                        options: [
                            "Any treatment can be provided",
                            "Only emergency treatment, defer elective care",
                            "Any treatment with monitoring",
                            "Routine treatment with sedation"
                        ],
                        correct: 1,
                        explanation: "For severe uncontrolled hypertension (‚â•180/110), elective treatment is deferred and only emergency treatment is provided in consultation with the physician."
                    },
                    {
                        question: "At what BP should treatment be terminated during dental procedure?",
                        options: [
                            "Above 160/100",
                            "Above 170/105",
                            "Above 179/109",
                            "Above 190/120"
                        ],
                        correct: 2,
                        explanation: "Treatment should be terminated if blood pressure rises above 179/109 mmHg."
                    },
                    {
                        question: "How many cartridges of 2% lidocaine with 1:100,000 epinephrine are generally safe for hypertensive patients?",
                        options: [
                            "One cartridge maximum",
                            "One or two cartridges",
                            "Three to four cartridges",
                            "Unlimited amount"
                        ],
                        correct: 1,
                        explanation: "One or two cartridges of 2% lidocaine with 1:100,000 epinephrine are of little clinical significance in most patients with hypertension."
                    },
                    {
                        question: "Why should epinephrine-impregnated gingival retraction cord be avoided in hypertensive patients?",
                        options: [
                            "It causes allergic reactions",
                            "It contains highly concentrated epinephrine that can be quickly absorbed",
                            "It damages gingival tissue",
                            "It interferes with blood clotting"
                        ],
                        correct: 1,
                        explanation: "Epinephrine-impregnated gingival retraction cords contain highly concentrated epinephrine which can be quickly absorbed through gingival sulcular tissues, resulting in tachycardia and elevated blood pressure."
                    },
                    {
                        question: "Why should norepinephrine and levonordefrin be avoided in hypertensive patients?",
                        options: [
                            "They cause allergies",
                            "Excessive alpha-1 stimulation",
                            "They are too weak",
                            "They cause tachycardia only"
                        ],
                        correct: 1,
                        explanation: "Norepinephrine and levonordefrin should be avoided because of their comparative excessive alpha-1 stimulation."
                    },
                    {
                        question: "What is white coat hypertension?",
                        options: [
                            "Hypertension caused by stress",
                            "Consistently elevated BP only in presence of healthcare worker",
                            "Hypertension in elderly patients",
                            "Hypertension requiring medication"
                        ],
                        correct: 1,
                        explanation: "White coat hypertension is defined as consistently elevated BP only in the presence of a health care worker but not elsewhere, occurring in about 20% of patients with untreated stage 1 hypertension."
                    },
                    {
                        question: "Which antihypertensive medication class may cause gingival hyperplasia?",
                        options: [
                            "ACE inhibitors",
                            "Beta blockers",
                            "Calcium channel blockers",
                            "Diuretics"
                        ],
                        correct: 2,
                        explanation: "All calcium channel blockers may cause gingival hyperplasia as an oral side effect."
                    },
                    {
                        question: "What oral complication can diuretics cause?",
                        options: [
                            "Gingival hyperplasia",
                            "Dry mouth (xerostomia)",
                            "Black hairy tongue",
                            "Oral cancer"
                        ],
                        correct: 1,
                        explanation: "Patients taking antihypertensive drugs, especially diuretics, may report dry mouth."
                    },
                    {
                        question: "Which antihypertensive drugs may cause lichenoid reactions?",
                        options: [
                            "ACE inhibitors only",
                            "Thiazides, methyldopa, propranolol, and labetalol",
                            "Calcium channel blockers only",
                            "Diuretics only"
                        ],
                        correct: 1,
                        explanation: "Lichenoid reactions have been reported with thiazides, methyldopa, propranolol, and labetalol."
                    },
                    {
                        question: "What complication can occur with malignant hypertension (systolic >200, diastolic >130)?",
                        options: [
                            "Hearing loss",
                            "Facial palsy",
                            "Vision loss",
                            "Memory loss"
                        ],
                        correct: 1,
                        explanation: "Patients with malignant hypertension have been reported to occasionally develop facial palsy."
                    },
                    {
                        question: "How should position changes be handled in hypertensive patients?",
                        options: [
                            "Rapid changes are fine",
                            "Slowly to prevent orthostatic hypotension",
                            "Always supine",
                            "Standing only"
                        ],
                        correct: 1,
                        explanation: "Slow position changes are necessary to prevent orthostatic hypotension, especially in patients taking antihypertensives."
                    }
                ]
            },
            2: {
                title: "Ischemic Heart Disease & Myocardial Infarction",
                questions: [
                    {
                        question: "What is the most common cause of ischemic heart disease?",
                        options: [
                            "Hypertension",
                            "Atherosclerosis (Atheroma)",
                            "Diabetes mellitus",
                            "Obesity"
                        ],
                        correct: 1,
                        explanation: "Ischemic Heart Disease is caused by atheroma (atherosclerosis), characterized by accumulation of cholesterol and lipids in the intima of arterial walls."
                    },
                    {
                        question: "What is the chemical formula for atherosclerosis deposits?",
                        options: [
                            "Lipoproteins and cholesterol",
                            "Calcium only",
                            "Fibrin only",
                            "Platelets only"
                        ],
                        correct: 0,
                        explanation: "Atherosclerosis is characterized by accumulation of cholesterol and lipids in the arterial intima."
                    },
                    {
                        question: "Persons who smoke 20+ cigarettes daily have what increased risk for CAD?",
                        options: [
                            "1.5 times",
                            "2-4 fold increase",
                            "5 fold",
                            "10 fold"
                        ],
                        correct: 1,
                        explanation: "Persons who smoke 20 or more cigarettes daily have a two to fourfold increase in coronary artery disease."
                    },
                    {
                        question: "Diabetes increases cardiovascular event rates by how much?",
                        options: [
                            "1.5-2 fold",
                            "2-8 fold higher rate",
                            "10 fold",
                            "No increase"
                        ],
                        correct: 1,
                        explanation: "Diabetes mellitus shows a two to eightfold higher rate of cardiovascular events."
                    },
                    {
                        question: "What is the mortality rate in angina per year?",
                        options: [
                            "1%",
                            "About 4% per year",
                            "10%",
                            "20%"
                        ],
                        correct: 1,
                        explanation: "The mortality rate in angina is about 4% per year, depending on the degree of coronary artery narrowing."
                    },
                    {
                        question: "What commonly precipitates angina in cold weather?",
                        options: [
                            "Sitting",
                            "Sleeping",
                            "Physical exertion",
                            "Eating"
                        ],
                        correct: 2,
                        explanation: "The most common precipitating cause of angina is physical exertion, particularly in cold weather."
                    },
                    {
                        question: "What causes angina pain physiologically?",
                        options: [
                            "Vessel rupture",
                            "Myocardial ischemia from imbalance between oxygen supply and demand",
                            "Blood clot",
                            "Valve dysfunction"
                        ],
                        correct: 1,
                        explanation: "Angina results from myocardial ischemia due to imbalance between oxygen-rich blood supply and oxygen demand."
                    },
                    {
                        question: "How long does angina pain typically last?",
                        options: [
                            "Less than 1 minute",
                            "2-5 minutes in most cases",
                            "15-20 minutes",
                            "More than 30 minutes"
                        ],
                        correct: 1,
                        explanation: "Angina pain lasts for less than 10-15 minutes, about 2-5 minutes in most cases, and is relieved by rest or glyceryl trinitrate."
                    },
                    {
                        question: "What ECG changes are seen in angina/ischemia?",
                        options: [
                            "Elevated QRS",
                            "ST depression, flat or inverted T wave",
                            "Prolonged PR interval",
                            "Wide QRS complex"
                        ],
                        correct: 1,
                        explanation: "Resting ECG in angina shows ST depression and flat or inverted T waves."
                    },
                    {
                        question: "What scan highlights ischemic myocardium?",
                        options: [
                            "CT scan",
                            "Thallium-201 scan",
                            "MRI",
                            "Ultrasound"
                        ],
                        correct: 1,
                        explanation: "Thallium-201 scan highlights ischemic myocardium for diagnosis."
                    },
                    {
                        question: "What is the first-line antiplatelet drug for angina/MI?",
                        options: [
                            "Clopidogrel only",
                            "Aspirin 75-325 mg/24h",
                            "Warfarin",
                            "Heparin"
                        ],
                        correct: 1,
                        explanation: "Aspirin 75-325 mg/24h is used as first-line antiplatelet therapy, often combined with clopidogrel."
                    },
                    {
                        question: "What is the mechanism of GTN (glyceryl trinitrate) in angina?",
                        options: [
                            "Increases heart rate",
                            "Reduces peripheral vascular resistance and oxygen demands",
                            "Increases blood pressure",
                            "Constricts vessels"
                        ],
                        correct: 1,
                        explanation: "GTN reduces peripheral vascular resistance and reduces oxygen demands of the heart."
                    },
                    {
                        question: "What dose of GTN is given for acute angina?",
                        options: [
                            "0.1 mg",
                            "0.3 mg sublingual",
                            "1 mg",
                            "5 mg"
                        ],
                        correct: 1,
                        explanation: "For symptoms, glyceryl trinitrate (GTN) spray or sublingual tablets 0.3 mg are given."
                    },
                    {
                        question: "What procedure opens coronary blood flow using a balloon catheter?",
                        options: [
                            "CABG",
                            "Percutaneous transluminal coronary angioplasty (PTCA) with stenting",
                            "Valve replacement",
                            "Heart transplant"
                        ],
                        correct: 1,
                        explanation: "PTCA with stenting uses a balloon-tipped catheter inserted through the groin to open arterial blockage."
                    },
                    {
                        question: "What defines unstable angina?",
                        options: [
                            "Angina only with severe exertion",
                            "Angina of increasing frequency/severity, occurs on minimal exertion or at rest",
                            "Angina relieved by rest",
                            "Angina that occurs only at night"
                        ],
                        correct: 1,
                        explanation: "Unstable (crescendo) angina is characterized by increasing frequency or severity, occurs on minimal exertion or at rest, and is not readily relieved by nitroglycerin."
                    },
                    {
                        question: "What percentage of MI patients have preceding angina symptoms?",
                        options: [
                            "Over 75%",
                            "About 60%",
                            "Fewer than 50%",
                            "Nearly 100%"
                        ],
                        correct: 2,
                        explanation: "Fewer than 50% of patients with MI have any preceding symptoms of angina."
                    },
                    {
                        question: "What percentage of individuals have silent (painless) MI?",
                        options: [
                            "5%",
                            "10-20%",
                            "30%",
                            "50%"
                        ],
                        correct: 1,
                        explanation: "10-20% of individuals have silent (painless) myocardial infarction."
                    },
                    {
                        question: "What percentage of patients die within the first hour of myocardial infarction?",
                        options: [
                            "10%",
                            "25%",
                            "50%",
                            "75%"
                        ],
                        correct: 2,
                        explanation: "50% of MI patients die within the first hour, and a further 10-20% within the next few days."
                    },
                    {
                        question: "What ECG changes are diagnostic for MI?",
                        options: [
                            "Small Q wave",
                            "Large Q wave, ST elevation, T inversion",
                            "Normal ECG",
                            "U waves"
                        ],
                        correct: 1,
                        explanation: "MI is diagnosed by large Q wave, ST elevation, and T inversion on ECG."
                    },
                    {
                        question: "Which cardiac enzyme is virtually absent in normal persons?",
                        options: [
                            "CK-MB",
                            "Troponin",
                            "AST",
                            "LDH"
                        ],
                        correct: 1,
                        explanation: "Troponin is virtually absent in plasma of normal persons and found only after cardiac injury."
                    },
                    {
                        question: "Which cardiac enzyme is most sensitive and specific for myocardial infarction?",
                        options: [
                            "CK-MB",
                            "AST",
                            "Troponin",
                            "LDH"
                        ],
                        correct: 2,
                        explanation: "Troponin assays are the most sensitive and specific in differentiating cardiac muscle damage and are virtually absent in plasma of normal persons."
                    },
                    {
                        question: "What is given for pain relief in acute MI?",
                        options: [
                            "Aspirin only",
                            "Opioid analgesia (diamorphine)",
                            "NSAIDs",
                            "Acetaminophen"
                        ],
                        correct: 1,
                        explanation: "Pain relief in acute MI requires opioid analgesia (diamorphine)."
                    },
                    {
                        question: "When must thrombolytic drugs be given for greatest benefit?",
                        options: [
                            "Within 30 minutes",
                            "Within 3 hours (modest benefit up to 12 hours)",
                            "Within 24 hours",
                            "Anytime"
                        ],
                        correct: 1,
                        explanation: "Greatest benefit is within first 3 hours after infarction; modest benefit possible up to 12 hours."
                    },
                    {
                        question: "What drugs are used for thrombolytic therapy?",
                        options: [
                            "Aspirin",
                            "Streptokinase, Urokinase, Alteplase, Reteplase",
                            "Warfarin",
                            "Heparin"
                        ],
                        correct: 1,
                        explanation: "Thrombolytic drugs include Streptokinase, Urokinase, Alteplase, and Reteplase."
                    },
                    {
                        question: "When is the conduction system most unstable after MI?",
                        options: [
                            "First 24 hours",
                            "First several weeks",
                            "After 6 months",
                            "After 1 year"
                        ],
                        correct: 1,
                        explanation: "During the first several weeks after infarction, the conduction system may be unstable with risk of serious arrhythmias."
                    },
                    {
                        question: "What is classified as intermediate risk for perioperative complications?",
                        options: [
                            "Recent MI",
                            "Stable angina and past history of MI >30 days",
                            "No cardiac history",
                            "Severe unstable angina"
                        ],
                        correct: 1,
                        explanation: "Stable angina and past history of MI are identified as clinical predictors of intermediate risk."
                    },
                    {
                        question: "Why should prophylactic nitroglycerin be given before dental procedure in some MI patients?",
                        options: [
                            "To prevent anxiety",
                            "To prevent angina attack, especially if patient has angina >once/week",
                            "To lower blood pressure",
                            "To prevent bleeding"
                        ],
                        correct: 1,
                        explanation: "Prophylactic preoperative nitroglycerin is advisable when patient has angina more than once a week."
                    },
                    {
                        question: "What is the maximum amount of epinephrine recommended for stable angina patients?",
                        options: [
                            "0.018 mg",
                            "0.036 mg (2 cartridges of 1:100,000)",
                            "0.054 mg",
                            "No epinephrine allowed"
                        ],
                        correct: 1,
                        explanation: "Limited use of vasoconstrictor with maximum 0.036 mg epinephrine (not more than two cartridges containing 1:100,000 epinephrine) is recommended."
                    },
                    {
                        question: "What is the recommended maximum levonordefrin dose for cardiac patients?",
                        options: [
                            "0.10 mg",
                            "0.20 mg",
                            "0.40 mg",
                            "No limit"
                        ],
                        correct: 1,
                        explanation: "Maximum 0.20 mg levonordefrin is recommended (limited vasoconstrictor use)."
                    },
                    {
                        question: "Why should anticholinergics be avoided in IHD patients?",
                        options: [
                            "They cause arrhythmias and tachycardia",
                            "They lower blood pressure",
                            "They cause bleeding",
                            "They cause sedation"
                        ],
                        correct: 0,
                        explanation: "Anticholinergics (scopolamine, atropine) should be avoided as they can cause tachycardia and arrhythmias."
                    },
                    {
                        question: "Do patients with IHD, stents, or CABG require antibiotic prophylaxis?",
                        options: [
                            "Yes, always",
                            "No, they do not require antibiotic prophylaxis",
                            "Only with stents",
                            "Only with CABG"
                        ],
                        correct: 1,
                        explanation: "Patients with ischemic heart disease, coronary artery stents, or CABG surgery do not require antibiotic prophylaxis."
                    },
                    {
                        question: "What medication should be given if chest pain persists >15-20 minutes?",
                        options: [
                            "More nitroglycerin only",
                            "300 mg aspirin chewed, oxygen continued",
                            "Sedation",
                            "Antibiotics"
                        ],
                        correct: 1,
                        explanation: "If pain persists suggesting MI, oxygen should be continued and 300 mg aspirin chewed."
                    },
                    {
                        question: "How many doses of nitroglycerin before suspecting MI?",
                        options: [
                            "One dose",
                            "Two doses",
                            "Three doses every 5 minutes",
                            "Five doses"
                        ],
                        correct: 2,
                        explanation: "If chest pain persists after three doses of nitroglycerin given every 5 minutes, MI is highly suspected."
                    },
                    {
                        question: "If chest pain persists after three doses of nitroglycerin (given every 5 minutes), what should be suspected?",
                        options: [
                            "Severe angina",
                            "Myocardial infarction",
                            "Panic attack",
                            "Gastric reflux"
                        ],
                        correct: 1,
                        explanation: "Chest pain that persists after three doses of nitroglycerin given every 5 min, lasts more than 15‚Äì20 min, or is associated with nausea, vomiting, syncope or hypertension is highly suggestive of MI."
                    }
                ]
            },
            3: {
                title: "Heart Failure & Cardiac Arrhythmias",
                questions: [
                    {
                        question: "What is the prevalence of heart failure among the elderly population?",
                        options: [
                            "1-3%",
                            "5%",
                            "10%",
                            "15%"
                        ],
                        correct: 2,
                        explanation: "Prevalence of heart failure is 1-3% of the general population and 10% among the elderly population."
                    },
                    {
                        question: "What is the most common cause of heart failure?",
                        options: [
                            "Hypertension",
                            "Valvular heart disease",
                            "Ischemic heart diseases (60-70%)",
                            "Dilated cardiomyopathy"
                        ],
                        correct: 2,
                        explanation: "Ischemic heart diseases are the most common cause of heart failure, accounting for 60-70% of cases."
                    },
                    {
                        question: "What percentage of heart failure patients die within 5 years?",
                        options: [
                            "10-20%",
                            "25-50%",
                            "60-70%",
                            "80-90%"
                        ],
                        correct: 1,
                        explanation: "The prognosis is poor, with 25-50% of heart failure patients dying within 5 years."
                    },
                    {
                        question: "What is the definition of heart failure according to ACC/AHA?",
                        options: [
                            "Only systolic dysfunction",
                            "Complex syndrome from structural/functional cardiac disorder impairing ventricle filling/ejection",
                            "Only pump failure",
                            "Only valve disease"
                        ],
                        correct: 1,
                        explanation: "HF is a complex clinical syndrome from any structural/functional cardiac disorder that impairs the ventricle's ability to fill with or eject blood."
                    },
                    {
                        question: "What is the second most common cause of heart failure?",
                        options: [
                            "Hypertension",
                            "Valvular disease",
                            "Dilated cardiomyopathy (25%)",
                            "Arrhythmias"
                        ],
                        correct: 2,
                        explanation: "Dilated cardiomyopathy is the second most common cause (25%), after ischemic heart disease (60-70%)."
                    },
                    {
                        question: "What defines Stage A heart failure?",
                        options: [
                            "Structural heart disease present",
                            "At-risk for HF with no structural disease, no symptoms",
                            "Symptomatic HF",
                            "Advanced HF requiring transplant"
                        ],
                        correct: 1,
                        explanation: "Stage A is 'At-risk for HF': patients at risk who have not yet developed structural heart disease, no signs/symptoms."
                    },
                    {
                        question: "What defines Stage B heart failure?",
                        options: [
                            "No structural changes",
                            "Pre-HF: structural disease or abnormal function, elevated natriuretic peptides, no symptoms",
                            "Symptomatic at rest",
                            "Advanced disease"
                        ],
                        correct: 1,
                        explanation: "Stage B 'Pre-HF' has structural disease or abnormal cardiac function or elevated natriuretic peptides without current/prior symptoms."
                    },
                    {
                        question: "What defines Stage C heart failure?",
                        options: [
                            "At risk only",
                            "Asymptomatic structural disease",
                            "HF: current or prior symptoms/signs from structural/functional abnormality",
                            "Advanced requiring transplant"
                        ],
                        correct: 2,
                        explanation: "Stage C 'HF' includes patients with current or prior symptoms/signs of HF caused by structural/functional cardiac abnormality."
                    },
                    {
                        question: "What defines Stage D (Advanced HF) in the Heart Failure classification?",
                        options: [
                            "At risk for HF with no symptoms",
                            "Structural heart disease without symptoms",
                            "Current or prior symptoms of HF",
                            "Severe symptoms at rest, recurrent hospitalizations despite treatment"
                        ],
                        correct: 3,
                        explanation: "Stage D (Advanced HF) includes patients with severe symptoms/signs at rest, recurrent hospitalizations despite guideline-directed therapy, requiring advanced therapies."
                    },
                    {
                        question: "What defines NYHA Class I?",
                        options: [
                            "No limitation of physical activity, no dyspnea with ordinary activity",
                            "Slight limitation",
                            "Marked limitation",
                            "Symptoms at rest"
                        ],
                        correct: 0,
                        explanation: "NYHA Class I: No limitation of physical activity, no dyspnea, fatigue, or palpitations with ordinary physical activity."
                    },
                    {
                        question: "What defines NYHA Class II?",
                        options: [
                            "No limitation",
                            "Slight limitation: symptoms with ordinary activity, comfortable at rest",
                            "Marked limitation",
                            "Symptoms at rest"
                        ],
                        correct: 1,
                        explanation: "NYHA Class II: Slight limitation - patients experience symptoms with ordinary activity but are comfortable at rest."
                    },
                    {
                        question: "What defines NYHA Class III?",
                        options: [
                            "No symptoms",
                            "Symptoms only with severe activity",
                            "Marked limitation: less than ordinary activity causes symptoms, comfortable at rest",
                            "Symptoms at rest"
                        ],
                        correct: 2,
                        explanation: "NYHA Class III: Marked limitation - less than ordinary physical activity results in symptoms, comfortable at rest."
                    },
                    {
                        question: "What defines NYHA Class IV?",
                        options: [
                            "Mild symptoms",
                            "Symptoms with exertion only",
                            "Occasional symptoms",
                            "Symptoms at rest, any exertion exacerbates symptoms"
                        ],
                        correct: 3,
                        explanation: "NYHA Class IV: Symptoms present at rest, and any physical exertion exacerbates the symptoms."
                    },
                    {
                        question: "What is compensated heart failure?",
                        options: [
                            "Complete recovery",
                            "Neurohumoral responses eliminate symptoms",
                            "Worsening symptoms",
                            "Advanced stage"
                        ],
                        correct: 1,
                        explanation: "Compensated HF is when neurohumoral responses eliminate the symptoms, while symptomatic HF is termed decompensated."
                    },
                    {
                        question: "What respiratory pattern may be seen in HF?",
                        options: [
                            "Normal breathing only",
                            "Cheyne-Stokes respiration (hyperventilation alternating with apnea)",
                            "Rapid shallow only",
                            "Deep slow breathing"
                        ],
                        correct: 1,
                        explanation: "Cheyne-Stokes respiration (hyperventilation alternating with apnea) may be seen in HF."
                    },
                    {
                        question: "What is pulsus alternans?",
                        options: [
                            "Irregular rhythm",
                            "Alternating strong and weak beats",
                            "Very fast pulse",
                            "Very slow pulse"
                        ],
                        correct: 1,
                        explanation: "Pulsus alternans is characterized by alternating strong and weak heartbeats."
                    },
                    {
                        question: "What is the normal ejection fraction range?",
                        options: [
                            "30-40%",
                            "40-50%",
                            "55-70%",
                            "75-85%"
                        ],
                        correct: 2,
                        explanation: "Normally, the ejection fraction (EF) should lie between 55 and 70%."
                    },
                    {
                        question: "What EF indicates cardiac failure?",
                        options: [
                            "<50%",
                            "<45%",
                            "<40%",
                            "<30%"
                        ],
                        correct: 2,
                        explanation: "In cardiac failure, the ejection fraction is less than 40%."
                    },
                    {
                        question: "Why may patients with heart failure not tolerate a supine chair position?",
                        options: [
                            "It causes anxiety",
                            "Due to pulmonary edema",
                            "It raises blood pressure",
                            "It causes arrhythmias"
                        ],
                        correct: 1,
                        explanation: "Patients with HF may not tolerate a supine chair position because of pulmonary edema."
                    },
                    {
                        question: "What drugs worsen HF clinical status?",
                        options: [
                            "ACE inhibitors",
                            "NSAIDs, most antiarrhythmics, calcium channel blockers",
                            "Beta blockers",
                            "Diuretics"
                        ],
                        correct: 1,
                        explanation: "Drugs that worsen HF include NSAIDs, most antiarrhythmic drugs, and calcium channel blockers."
                    },
                    {
                        question: "Why should NSAIDs be avoided in heart failure patients?",
                        options: [
                            "They cause bleeding",
                            "They can exacerbate symptoms of heart failure",
                            "They interact with antibiotics",
                            "They cause allergic reactions"
                        ],
                        correct: 1,
                        explanation: "Nonsteroidal antiinflammatory drugs (NSAIDs) can exacerbate symptoms of heart failure and should be avoided."
                    },
                    {
                        question: "Why is supplemental oxygen sometimes required in HF?",
                        options: [
                            "To reduce anxiety",
                            "Due to pulmonary congestion and hypoxemia",
                            "To lower blood pressure",
                            "To prevent infection"
                        ],
                        correct: 1,
                        explanation: "Supplemental oxygen may be required due to pulmonary edema and hypoxemia in HF."
                    },
                    {
                        question: "What is the concern with using epinephrine in patients taking digitalis?",
                        options: [
                            "Hypertension",
                            "Risk of inducing arrhythmias",
                            "Bleeding",
                            "Allergic reaction"
                        ],
                        correct: 1,
                        explanation: "For patients taking digitalis, avoid epinephrine due to potential for inducing arrhythmias."
                    },
                    {
                        question: "Which antibiotics may increase digitalis absorption leading to toxicity?",
                        options: [
                            "Penicillin",
                            "Erythromycin and clarithromycin",
                            "Tetracycline",
                            "Metronidazole"
                        ],
                        correct: 1,
                        explanation: "Avoid erythromycin and clarithromycin as they may increase digitalis absorption and lead to toxicity."
                    },
                    {
                        question: "What are signs of digitalis toxicity?",
                        options: [
                            "Bradycardia and dry mouth",
                            "Tachycardia, hypersalivation, visual disturbances",
                            "Fever and rash",
                            "Hypertension"
                        ],
                        correct: 1,
                        explanation: "Signs of digitalis toxicity include tachycardia, hypersalivation, and visual disturbances."
                    },
                    {
                        question: "What is the concern with using general anesthesia in HF patients?",
                        options: [
                            "It's always safe",
                            "General anesthesia should be avoided in patients with HF",
                            "It improves cardiac function",
                            "No concerns"
                        ],
                        correct: 1,
                        explanation: "General anesthesia should be avoided in patients with heart failure."
                    },
                    {
                        question: "What oral side effect can vasodilators cause?",
                        options: [
                            "Gingival hyperplasia",
                            "Lupus-like lesions and lymphadenopathy",
                            "Black tongue",
                            "Leukoplakia"
                        ],
                        correct: 1,
                        explanation: "Vasodilators can cause lupus-like lesions and lymphadenopathy."
                    },
                    {
                        question: "What oral manifestation is associated with digoxin toxicity?",
                        options: [
                            "Dry mouth",
                            "Gingival hyperplasia",
                            "Hypersalivation and increased gag reflex",
                            "Burning mouth"
                        ],
                        correct: 2,
                        explanation: "Increased gag reflex and hypersalivation are associated with digitalis toxicity."
                    },
                    {
                        question: "What percentage of the population may have cardiac arrhythmias?",
                        options: [
                            "1-5%",
                            "5-15%",
                            "20-30%",
                            "35-45%"
                        ],
                        correct: 1,
                        explanation: "5-15% of the population may have arrhythmias, and the prevalence increases with age."
                    },
                    {
                        question: "What cardiac causes can lead to arrhythmias?",
                        options: [
                            "Caffeine only",
                            "MI, mitral valve disease, cardiomyopathy, pericarditis, aberrant pathways",
                            "Stress only",
                            "Exercise only"
                        ],
                        correct: 1,
                        explanation: "Cardiac causes include MI, mitral valve diseases, cardiomyopathy, pericarditis, or aberrant conduction pathways."
                    },
                    {
                        question: "What non-cardiac factors can cause arrhythmias?",
                        options: [
                            "Only medications",
                            "Caffeine, smoking, alcohol, fever, respiratory diseases, hypoxia, electrolyte imbalances",
                            "Only stress",
                            "Only exercise"
                        ],
                        correct: 1,
                        explanation: "Non-cardiac causes include caffeine, smoking, alcohol, fever, respiratory/autonomic/endocrine diseases, hypoxia, electrolyte disturbances."
                    },
                    {
                        question: "What defines tachycardia?",
                        options: [
                            "Heart rate <60 bpm",
                            "Heart rate >100 bpm",
                            "Heart rate 60-100 bpm",
                            "Irregular rhythm only"
                        ],
                        correct: 1,
                        explanation: "Tachycardia is defined as a heart rate greater than 100 beats per minute."
                    },
                    {
                        question: "What defines bradycardia?",
                        options: [
                            "Heart rate <60 bpm",
                            "Heart rate <50 bpm",
                            "Heart rate <40 bpm",
                            "Heart rate <30 bpm"
                        ],
                        correct: 0,
                        explanation: "Bradycardia is defined as a heart rate less than 60 beats per minute."
                    },
                    {
                        question: "What are Class I antiarrhythmic drugs?",
                        options: [
                            "Beta blockers",
                            "Sodium channel blockers",
                            "Calcium channel blockers",
                            "Potassium channel drugs"
                        ],
                        correct: 1,
                        explanation: "Class I antiarrhythmic drugs are sodium channel blockers."
                    },
                    {
                        question: "What are Class II antiarrhythmic drugs?",
                        options: [
                            "Sodium channel blockers",
                            "Beta blockers",
                            "Calcium channel blockers",
                            "Potassium channel drugs"
                        ],
                        correct: 1,
                        explanation: "Class II antiarrhythmic drugs are beta blockers."
                    },
                    {
                        question: "What are Class III antiarrhythmic drugs?",
                        options: [
                            "Beta blockers",
                            "Sodium channel blockers",
                            "Potassium channel drugs that prolong action potential duration",
                            "Calcium channel blockers"
                        ],
                        correct: 2,
                        explanation: "Class III drugs act on potassium channels and prolong the duration of action potential."
                    },
                    {
                        question: "What are Class IV antiarrhythmic drugs?",
                        options: [
                            "Beta blockers",
                            "Sodium channel blockers",
                            "Potassium channel drugs",
                            "Calcium channel blockers"
                        ],
                        correct: 3,
                        explanation: "Class IV antiarrhythmic drugs are calcium channel blockers."
                    },
                    {
                        question: "Where is a pacemaker typically implanted?",
                        options: [
                            "Right chest wall",
                            "Left infraclavicular area subcutaneously",
                            "Abdomen",
                            "Upper arm"
                        ],
                        correct: 1,
                        explanation: "A pacemaker is a subcutaneously implanted generator in the left infraclavicular area."
                    },
                    {
                        question: "What is the concern with electromagnetic interference (EMI) for pacemakers?",
                        options: [
                            "No concerns",
                            "Pacemakers and ICDs are subject to EMI",
                            "Only ICDs affected",
                            "Only affects battery"
                        ],
                        correct: 1,
                        explanation: "Both pacemakers and ICDs are subject to electromagnetic interference (EMI)."
                    },
                    {
                        question: "What can ICDs provide besides defibrillation?",
                        options: [
                            "Only shocks",
                            "Antitachycardia pacing (ATP) and ventricular bradycardia pacing",
                            "Nothing else",
                            "Only monitoring"
                        ],
                        correct: 1,
                        explanation: "ICDs can provide antitachycardia pacing (ATP) and ventricular bradycardia pacing in addition to shock."
                    },
                    {
                        question: "What arrhythmias are associated with MAJOR perioperative risk?",
                        options: [
                            "All arrhythmias",
                            "High-grade AV block, symptomatic ventricular arrhythmias with heart disease, uncontrolled SVT",
                            "Minor rhythm changes",
                            "Occasional PVCs"
                        ],
                        correct: 1,
                        explanation: "Major risk: high-grade AV block, symptomatic ventricular arrhythmias with underlying heart disease, supraventricular arrhythmias with uncontrolled ventricular rate."
                    },
                    {
                        question: "For major risk arrhythmias, what dental treatment is recommended?",
                        options: [
                            "Any treatment",
                            "Only urgent care for pain/infection/bleeding, preferably in hospital",
                            "Routine care",
                            "Preventive care only"
                        ],
                        correct: 1,
                        explanation: "For major risk arrhythmias, avoid elective treatment; provide only urgent care for pain control, infection treatment, or bleeding control."
                    },
                    {
                        question: "Why should electrosurgery be avoided in pacemaker patients?",
                        options: [
                            "It's painful",
                            "Risk of electromagnetic interference",
                            "Causes burns",
                            "Affects anesthesia"
                        ],
                        correct: 1,
                        explanation: "Avoid electrosurgery and ultrasonic scalers in pacemaker patients due to electromagnetic interference."
                    },
                    {
                        question: "Do patients with pacemakers need antibiotic prophylaxis?",
                        options: [
                            "Yes, always",
                            "Antibiotic prophylaxis to prevent bacterial endocarditis is NOT recommended",
                            "Only for surgery",
                            "Only if recent implant"
                        ],
                        correct: 1,
                        explanation: "Antibiotic prophylaxis to prevent bacterial endocarditis is not recommended for pacemaker patients."
                    }
                ]
            },
            4: {
                title: "Infective Endocarditis & Rheumatic Heart Disease",
                questions: [
                    {
                        question: "What is the most common cause of community-acquired native valve endocarditis?",
                        options: [
                            "Staphylococcus aureus",
                            "Streptococci viridans (alpha-hemolytic)",
                            "Streptococcus pyogenes",
                            "Candida species"
                        ],
                        correct: 1,
                        explanation: "Streptococci viridans (alpha-hemolytic streptococci), normal constituents of oral flora, remain the most common cause of community-acquired NVE (30-65% of cases)."
                    },
                    {
                        question: "What percentage of IE cases are caused by streptococci?",
                        options: [
                            "10-20%",
                            "30-65%",
                            "70-80%",
                            "90-100%"
                        ],
                        correct: 1,
                        explanation: "Streptococci are the most common cause of IE, accounting for 30-65% of cases."
                    },
                    {
                        question: "What percentage of IE cases are caused by staphylococci?",
                        options: [
                            "10-15%",
                            "20-25%",
                            "At least 30-40%",
                            "50-60%"
                        ],
                        correct: 2,
                        explanation: "Staphylococci cause at least 30-40% of IE cases."
                    },
                    {
                        question: "In recent studies, which organism has emerged as most common cause of IE?",
                        options: [
                            "Streptococcus viridans",
                            "S. aureus (rates of viridans streptococci have decreased)",
                            "Enterococcus",
                            "Candida"
                        ],
                        correct: 1,
                        explanation: "In recent studies, S. aureus has emerged as the most common cause of IE and rates of viridans streptococci have decreased."
                    },
                    {
                        question: "What is the most common pathogen in IE associated with IV drug abuse?",
                        options: [
                            "Streptococcus viridans",
                            "Staphylococcus aureus",
                            "Enterococcus",
                            "Candida"
                        ],
                        correct: 1,
                        explanation: "Coagulase-positive Staphylococcus aureus is the most common pathogen in IE associated with IV drug abuse."
                    },
                    {
                        question: "What does HACEK stand for in IE etiology?",
                        options: [
                            "Hospital-acquired chronic endocarditis killer",
                            "Haemophilus, Actinobacillus, Cardiobacterium, Eikenella, Kingella",
                            "High-acuity cardiac event killer",
                            "Hemolytic anaerobic cardiac endocarditis"
                        ],
                        correct: 1,
                        explanation: "HACEK group consists of Haemophilus, Actinobacillus, Cardiobacterium, Eikenella, and Kingella."
                    },
                    {
                        question: "What percentage of IE cases have mitral valve prolapse as predisposing condition?",
                        options: [
                            "5-10%",
                            "15-20%",
                            "25-30%",
                            "40-50%"
                        ],
                        correct: 2,
                        explanation: "Mitral valve prolapse accounts for 25-30% of IE cases as a predisposing condition."
                    },
                    {
                        question: "What is the first step in IE pathophysiology?",
                        options: [
                            "Bacterial seeding",
                            "Injury or damage to endothelial surface, often valve leaflet",
                            "Immune response",
                            "Vegetation formation"
                        ],
                        correct: 1,
                        explanation: "The first step is injury or damage to an endothelial surface, most often of a cardiac valve leaflet."
                    },
                    {
                        question: "What are nonbacterial thrombotic endocarditis (NBTE)?",
                        options: [
                            "Infected masses",
                            "Sterile fibrin and platelet clusters that form on damaged endothelium",
                            "Blood clots",
                            "Valve tears"
                        ],
                        correct: 1,
                        explanation: "NBTE are small sterile clusters of fibrin and platelets that adhere to roughened endothelial surface; they do not contain microorganisms."
                    },
                    {
                        question: "How long is the interval between initiating bacteremia and IE symptoms in most patients?",
                        options: [
                            "<24 hours",
                            "Less than 2 weeks in >80%",
                            "2-4 weeks",
                            "1-2 months"
                        ],
                        correct: 1,
                        explanation: "The interval between presumed initiating bacteremia and onset of IE symptoms is estimated to be less than 2 weeks in more than 80% of patients."
                    },
                    {
                        question: "What is the most common symptom of IE?",
                        options: [
                            "Chest pain",
                            "Fever",
                            "Shortness of breath",
                            "Rash"
                        ],
                        correct: 1,
                        explanation: "Fever is the most common symptom in infective endocarditis."
                    },
                    {
                        question: "What are Osler's nodes?",
                        options: [
                            "Retinal hemorrhages",
                            "Small, tender, subcutaneous nodules in pulp of digits from immune complex deposition",
                            "Palm lesions",
                            "Heart murmurs"
                        ],
                        correct: 1,
                        explanation: "Osler's nodes are small, tender, subcutaneous nodules in the pulp of digits, named after Sir William Osler, caused by immune-complex deposition."
                    },
                    {
                        question: "What are Janeway lesions?",
                        options: [
                            "Retinal spots",
                            "Finger nodules",
                            "Small, erythematous/hemorrhagic, macular nontender lesions on palms/soles from septic emboli",
                            "Conjunctival petechiae"
                        ],
                        correct: 2,
                        explanation: "Janeway lesions are small, erythematous or hemorrhagic, macular nontender lesions on palms and soles, named after Edward Janeway, caused by septic emboli."
                    },
                    {
                        question: "What are Roth spots?",
                        options: [
                            "Finger lesions",
                            "Palm lesions",
                            "Oval retinal hemorrhages with pale centers from immune complex vasculitis",
                            "Toe spots"
                        ],
                        correct: 2,
                        explanation: "Roth spots are oval retinal hemorrhages with pale centers, named after Moritz Roth, caused by immune complex mediated vasculitis."
                    },
                    {
                        question: "What percentage of IE cases are initially 'culture negative'?",
                        options: [
                            "5-10%",
                            "15-20%",
                            "Up to 30%",
                            "50%"
                        ],
                        correct: 2,
                        explanation: "Up to 30% of IE cases are initially found to be 'culture negative,' especially in patients who took antibiotics prior to diagnosis."
                    },
                    {
                        question: "How many major Duke criteria are needed for definitive IE diagnosis?",
                        options: [
                            "One major criterion",
                            "Two major criteria",
                            "Three major criteria",
                            "All major criteria"
                        ],
                        correct: 1,
                        explanation: "Definitive diagnosis requires two major criteria, or one major and more than three minor criteria, or five minor criteria."
                    },
                    {
                        question: "What is the overall mortality rate for IE despite treatment?",
                        options: [
                            "5%",
                            "10-30%",
                            "40-50%",
                            "60%"
                        ],
                        correct: 1,
                        explanation: "The overall mortality rate for IE despite treatment is 10-30%."
                    },
                    {
                        question: "What antibiotics are most widely used for IE treatment?",
                        options: [
                            "Azithromycin",
                            "Penicillin, ceftriaxone, gentamicin, vancomycin",
                            "Doxycycline",
                            "Metronidazole"
                        ],
                        correct: 1,
                        explanation: "The most widely used antibiotics include penicillin, ceftriaxone, gentamicin, and vancomycin."
                    },
                    {
                        question: "What should dentists do when encountering bacteremia from daily activities?",
                        options: [
                            "Prescribe antibiotics",
                            "Emphasize maintaining good oral hygiene and eradicating dental/oral disease",
                            "Avoid all treatment",
                            "Extract all teeth"
                        ],
                        correct: 1,
                        explanation: "Studies show bacteremia from daily activities (brushing, flossing) emphasizes need to maintain good oral hygiene and eradicate dental disease."
                    },
                    {
                        question: "When should preoperative dental evaluation be done for cardiac valve surgery?",
                        options: [
                            "After surgery",
                            "Not necessary",
                            "Before initiation of cardiac valve surgery whenever possible",
                            "One year before"
                        ],
                        correct: 2,
                        explanation: "Preoperative dental evaluation and necessary treatment should be provided whenever possible before cardiac valve surgery to decrease IE incidence."
                    },
                    {
                        question: "Which cardiac condition has the HIGHEST risk requiring IE prophylaxis?",
                        options: [
                            "Mitral valve prolapse",
                            "Prosthetic cardiac valve",
                            "Bicuspid aortic valve",
                            "Atrial septal defect"
                        ],
                        correct: 1,
                        explanation: "Prosthetic cardiac valve is one of the cardiac conditions associated with the highest risk of adverse outcome from endocarditis requiring prophylaxis."
                    },
                    {
                        question: "For completely repaired CHD with prosthetic material, how long is prophylaxis recommended?",
                        options: [
                            "Forever",
                            "First 6 months after procedure (endothelialization occurs within 6 months)",
                            "First year",
                            "Not needed"
                        ],
                        correct: 1,
                        explanation: "For completely repaired CHD with prosthetic material, prophylaxis is reasonable during first 6 months because endothelialization occurs within 6 months."
                    },
                    {
                        question: "Which dental procedures do NOT need IE prophylaxis?",
                        options: [
                            "All extractions",
                            "Routine anesthetic injections through noninfected tissue, restorative dentistry, radiographs",
                            "All gingival manipulation",
                            "All oral mucosa perforation"
                        ],
                        correct: 1,
                        explanation: "No prophylaxis needed for: routine anesthetic injections through noninfected tissue, restorative dentistry, radiographs, placement of appliances, suture removal, fluoride treatment."
                    },
                    {
                        question: "What is the adult amoxicillin prophylaxis dose for IE?",
                        options: [
                            "500 mg",
                            "1 g",
                            "2 g",
                            "3 g"
                        ],
                        correct: 2,
                        explanation: "The adult dose of amoxicillin for IE prophylaxis is 2 g, taken 30-60 minutes before the procedure."
                    },
                    {
                        question: "What is the pediatric amoxicillin dose for IE prophylaxis?",
                        options: [
                            "25 mg/kg",
                            "50 mg/kg",
                            "75 mg/kg",
                            "100 mg/kg"
                        ],
                        correct: 1,
                        explanation: "The pediatric dose of amoxicillin for IE prophylaxis is 50 mg/kg."
                    },
                    {
                        question: "What should be given if patient is unable to take oral medication?",
                        options: [
                            "No alternative",
                            "Ampicillin 2g IM/IV or Cefazolin/Ceftriaxone 1g IM/IV",
                            "Double oral dose",
                            "Wait until they can take oral"
                        ],
                        correct: 1,
                        explanation: "If unable to take oral medication: Ampicillin 2g IM or IV, or Cefazolin or Ceftriaxone 1g IM or IV."
                    },
                    {
                        question: "What is the antibiotic prophylaxis regimen for a patient allergic to penicillin (oral)?",
                        options: [
                            "Amoxicillin 2g",
                            "Cephalexin 2g or Azithromycin 500mg or Doxycycline 100mg",
                            "Ampicillin 2g IM",
                            "Clindamycin 600mg"
                        ],
                        correct: 1,
                        explanation: "For patients allergic to penicillins (oral route), alternatives include Cephalexin 2g, Azithromycin 500mg, or Doxycycline 100mg, 30-60 minutes before procedure."
                    },
                    {
                        question: "Why should cephalosporins be avoided in patients with certain penicillin allergies?",
                        options: [
                            "They're ineffective",
                            "Not avoided in history of anaphylaxis, angioedema, or urticaria with penicillins",
                            "Too expensive",
                            "Wrong spectrum"
                        ],
                        correct: 1,
                        explanation: "Cephalosporins should not be used in individuals with history of anaphylaxis, angioedema, or urticaria with penicillins or ampicillin."
                    },
                    {
                        question: "Why was clindamycin eliminated from current AHA recommendations?",
                        options: [
                            "Not effective",
                            "Adverse effect profile led to elimination",
                            "Too expensive",
                            "Difficult to obtain"
                        ],
                        correct: 1,
                        explanation: "The adverse effect profile with prophylactic use of clindamycin led to its elimination from current AHA recommendations."
                    },
                    {
                        question: "What should be done if patient is already taking penicillin for another reason?",
                        options: [
                            "Give penicillin anyway",
                            "Select azithromycin, clarithromycin, or doxycycline; avoid cephalosporins (cross resistance)",
                            "No prophylaxis needed",
                            "Double the dose"
                        ],
                        correct: 1,
                        explanation: "If already taking penicillin, select azithromycin, clarithromycin, or doxycycline; avoid cephalosporins due to potential cross resistance."
                    },
                    {
                        question: "How long after amoxicillin therapy should you wait before prophylaxis?",
                        options: [
                            "24 hours",
                            "At least 10 days (preferably 24 days for amoxicillin-resistant VGS)",
                            "1 week",
                            "No waiting needed"
                        ],
                        correct: 1,
                        explanation: "Wait at least 10 days after completion of antibiotic therapy; waiting 24 days may have additional benefit for amoxicillin-resistant VGS."
                    },
                    {
                        question: "When should an additional prophylactic dose be given?",
                        options: [
                            "Never needed",
                            "If dental procedure lasts longer than 6 hours",
                            "Every hour",
                            "Only if bleeding occurs"
                        ],
                        correct: 1,
                        explanation: "For prolonged dental procedures (longer than 6 hours), it is advisable to administer an additional prophylactic dose (same dose)."
                    },
                    {
                        question: "What autoimmune process causes rheumatic fever?",
                        options: [
                            "Viral infection",
                            "Process developing after pharyngeal infection with group A beta-hemolytic streptococci",
                            "Fungal infection",
                            "Parasitic infection"
                        ],
                        correct: 1,
                        explanation: "Rheumatic fever is an autoimmune inflammatory process developing after pharyngeal infection with group A beta-hemolytic streptococci (streptococcus pyogenes)."
                    },
                    {
                        question: "How long after sore throat does rheumatic fever typically occur?",
                        options: [
                            "Immediately",
                            "After about 3 weeks",
                            "After 6 months",
                            "After 1 year"
                        ],
                        correct: 1,
                        explanation: "A sore throat may be followed after about 3 weeks by acute febrile illness with multiple joint pain."
                    },
                    {
                        question: "Which age group is predominantly affected by rheumatic fever?",
                        options: [
                            "Infants (0-2 years)",
                            "Children (5-15 years)",
                            "Adults (20-40 years)",
                            "Elderly (>60 years)"
                        ],
                        correct: 1,
                        explanation: "Rheumatic fever predominantly affects children between 5-15 years of age."
                    },
                    {
                        question: "What is Sydenham chorea also called?",
                        options: [
                            "Dance fever",
                            "St. Vitus dance",
                            "Rheumatic dance",
                            "Cardiac chorea"
                        ],
                        correct: 1,
                        explanation: "Sydenham chorea, causing spasmodic involuntary movements, is also called St. Vitus dance."
                    },
                    {
                        question: "What valves are most commonly affected in rheumatic heart disease?",
                        options: [
                            "Pulmonary and tricuspid",
                            "Mitral and aortic valves",
                            "All valves equally",
                            "Only mitral"
                        ],
                        correct: 1,
                        explanation: "Subendocardial inflammation particularly affects mitral and aortic valve cusps, often causing stenosis."
                    },
                    {
                        question: "How many major criteria must be fulfilled for diagnosis of acute rheumatic fever?",
                        options: [
                            "One major criterion",
                            "At least two major criteria",
                            "Three major criteria",
                            "All major criteria"
                        ],
                        correct: 1,
                        explanation: "The diagnosis of acute rheumatic fever is made only if at least two of the major criteria are fulfilled."
                    },
                    {
                        question: "What is the most serious cardiac complication of rheumatic fever?",
                        options: [
                            "Pericarditis",
                            "Myocarditis",
                            "Subendocardial inflammation leading to valvular scarring and stenosis",
                            "Arrhythmias"
                        ],
                        correct: 2,
                        explanation: "The most serious complication is subendocardial inflammation, particularly along valve closure lines, resulting in vegetations and later scarring/stenosis of mitral and aortic valves."
                    },
                    {
                        question: "What is the key to preventing rheumatic fever?",
                        options: [
                            "Vaccination",
                            "Prompt antimicrobial treatment of streptococcal sore throat within 24 hours",
                            "Antibiotics after symptoms",
                            "Surgery"
                        ],
                        correct: 1,
                        explanation: "Prompt antimicrobial treatment of streptococcal sore throat (within 24 hours of onset) prevents rheumatic fever development in most cases."
                    },
                    {
                        question: "What continuous antibiotic prophylaxis is given after rheumatic carditis?",
                        options: [
                            "Amoxicillin",
                            "Oral phenoxymethyl penicillin until age 20",
                            "Azithromycin",
                            "Clindamycin"
                        ],
                        correct: 1,
                        explanation: "After an attack of rheumatic carditis, continuous oral phenoxymethyl penicillin is given until age 20 to lessen risk of recurrence."
                    },
                    {
                        question: "What should be given to rheumatic fever patients allergic to penicillin?",
                        options: [
                            "No alternative",
                            "Sulfadimidine",
                            "Azithromycin",
                            "Vancomycin"
                        ],
                        correct: 1,
                        explanation: "For those allergic to penicillin, sulfadimidine should be given for rheumatic fever prophylaxis."
                    },
                    {
                        question: "How are patients with rheumatic fever history but no cardiac involvement treated dentally?",
                        options: [
                            "Special precautions always",
                            "Treated as normal person",
                            "Always need prophylaxis",
                            "Cannot receive dental treatment"
                        ],
                        correct: 1,
                        explanation: "Patients with history of rheumatic fever but without cardiac involvement are treated as a normal person."
                    },
                    {
                        question: "What is the concern with anticoagulated rheumatic heart disease patients?",
                        options: [
                            "No concerns",
                            "Should be managed after determining PT and INR in consultation with physician",
                            "Cannot receive dental treatment",
                            "Need hospitalization always"
                        ],
                        correct: 1,
                        explanation: "Most chronic rheumatic heart disease patients are anticoagulated and should be managed after determining prothrombin time and INR, consulting with physician."
                    }
                ]
            },
            5: {
                title: "Congenital Heart Disease",
                questions: [
                    {
                        question: "What is the most common type of cardiac disease in children?",
                        options: [
                            "Acquired heart disease",
                            "Congenital heart diseases (CHD)",
                            "Infectious heart disease",
                            "Rheumatic heart disease"
                        ],
                        correct: 1,
                        explanation: "Congenital heart diseases (CHD) are the most common type of cardiac diseases present in children."
                    },
                    {
                        question: "What defines cyanotic CHDs?",
                        options: [
                            "Left to right shunt",
                            "Right to left shunt causing chronic hypoxemia",
                            "No shunting",
                            "Valve problems only"
                        ],
                        correct: 1,
                        explanation: "Cyanotic CHDs result from shunting of deoxygenated blood from right ventricle into left side and systemic circulation (right to left shunt) causing chronic hypoxemia."
                    },
                    {
                        question: "What is Eisenmenger syndrome?",
                        options: [
                            "A type of valve disease",
                            "A cyanotic CHD (named after Victor Eisenmenger, 1897)",
                            "An arrhythmia",
                            "A cardiomyopathy"
                        ],
                        correct: 1,
                        explanation: "Eisenmenger syndrome is a cyanotic CHD, named after Victor Eisenmenger who described this condition in 1897."
                    },
                    {
                        question: "What is Fallot's tetralogy?",
                        options: [
                            "Four valve problems",
                            "A cyanotic CHD (named after Etienne-Louis-Arthur Fallot)",
                            "Four chamber defect",
                            "Four vessel disease"
                        ],
                        correct: 1,
                        explanation: "Fallot's tetralogy is a cyanotic CHD, named after French physician Etienne-Louis-Arthur Fallot (1850-1911)."
                    },
                    {
                        question: "What postural behavior may cyanotic CHD patients exhibit?",
                        options: [
                            "Lying flat",
                            "Crouching to improve venous return",
                            "Standing always",
                            "Sitting upright"
                        ],
                        correct: 1,
                        explanation: "Patients with cyanotic CHD may crouch to improve venous return."
                    },
                    {
                        question: "What develops after 3 months of age in cyanotic CHD?",
                        options: [
                            "Anemia",
                            "Finger and toe clubbing",
                            "Rash",
                            "Edema"
                        ],
                        correct: 1,
                        explanation: "Polycythemia with hemorrhagic and thrombotic tendencies develop, and finger and toe clubbing develops after 3 months of age."
                    },
                    {
                        question: "What percentage of untreated cyanotic CHD patients die within 5 years?",
                        options: [
                            "10%",
                            "25%",
                            "40%",
                            "60%"
                        ],
                        correct: 2,
                        explanation: "If untreated, 40% of patients with cyanotic CHD die within 5 years."
                    },
                    {
                        question: "What are examples of acyanotic CHD with no shunt?",
                        options: [
                            "VSD and ASD",
                            "Aortic stenosis, bicuspid aortic valve, coarctation of aorta, dextrocardia, MVP",
                            "Tetralogy of Fallot",
                            "Transposition"
                        ],
                        correct: 1,
                        explanation: "Acyanotic CHD with no shunt includes aortic stenosis, bicuspid aortic valve, coarctation of aorta, dextrocardia, and mitral valve prolapse."
                    },
                    {
                        question: "What are examples of acyanotic CHD with left to right shunt?",
                        options: [
                            "Tetralogy of Fallot",
                            "ASD (atrial septal defects), VSD (ventricular septal defects), PDA (patent ductus arteriosus)",
                            "Pulmonary atresia",
                            "Transposition"
                        ],
                        correct: 1,
                        explanation: "Acyanotic CHD with left to right shunt includes atrial septal defects (ASD), ventricular septal defects (VSD), and patent ductus arteriosus (PDA)."
                    },
                    {
                        question: "Can some CHD start acyanotic and become cyanotic?",
                        options: [
                            "No, never changes",
                            "Yes, some CHD start as acyanotic and become cyanotic with time",
                            "Only improves",
                            "Depends on surgery only"
                        ],
                        correct: 1,
                        explanation: "Some CHD start as acyanotic diseases and become cyanotic with time."
                    },
                    {
                        question: "What is the primary diagnostic tool for CHD?",
                        options: [
                            "X-ray only",
                            "Echocardiography, confirmed by cardiac MRI",
                            "Blood tests",
                            "Physical exam only"
                        ],
                        correct: 1,
                        explanation: "CHD is most commonly diagnosed through echocardiography and confirmed by cardiac magnetic resonance imaging (MRI)."
                    },
                    {
                        question: "What is the treatment of choice for most CHD?",
                        options: [
                            "Medications only",
                            "Early correction of congenital defect, often by transvenous catheter techniques",
                            "Wait and see",
                            "No treatment needed"
                        ],
                        correct: 1,
                        explanation: "Early correction of the congenital defect, often by transvenous catheter techniques, is the treatment of choice."
                    },
                    {
                        question: "What are adults with surgically repaired CHD called?",
                        options: [
                            "Cured patients",
                            "Adult or 'grown-up' CHD",
                            "Normal patients",
                            "Post-cardiac patients"
                        ],
                        correct: 1,
                        explanation: "Modern surgical and medical care helps children survive into adult life; these patients are called adult or 'grown-up' CHD."
                    },
                    {
                        question: "What complications can occur in adults with previously repaired CHD?",
                        options: [
                            "No complications",
                            "Arrhythmias, valve disorders, cardiac failure, residual defects predisposing to IE",
                            "Only improved function",
                            "Complete recovery"
                        ],
                        correct: 1,
                        explanation: "Complications in adults with repaired CHD include arrhythmias, valve disorders, cardiac failure, and residual defects still predisposing to infective endocarditis."
                    },
                    {
                        question: "What is the most important dental consideration for CHD patients?",
                        options: [
                            "Tooth color",
                            "How well the patient's heart condition is compensated",
                            "Number of teeth",
                            "Gum health"
                        ],
                        correct: 1,
                        explanation: "The most important aspect for dentists is how well the patient's heart condition is compensated. Consultation with physician is recommended."
                    },
                    {
                        question: "When are dental appointments advisable for CHD patients?",
                        options: [
                            "Early morning",
                            "Late morning or early afternoon",
                            "Evening",
                            "Night"
                        ],
                        correct: 1,
                        explanation: "Late morning or early afternoon appointments are advisable for CHD patients."
                    },
                    {
                        question: "What oral manifestation is seen in CHD?",
                        options: [
                            "Normal eruption",
                            "Delayed eruption of both dentitions",
                            "Early eruption",
                            "No effect on teeth"
                        ],
                        correct: 1,
                        explanation: "Oral manifestations of CHD include delayed eruption of both deciduous and permanent dentitions."
                    },
                    {
                        question: "What enamel appearance is seen in CHD?",
                        options: [
                            "Normal enamel",
                            "Enamel hypoplasia with bluish-white 'skimmed milk' appearance and pulp vasodilatation",
                            "Yellow enamel",
                            "Brown enamel"
                        ],
                        correct: 1,
                        explanation: "Enamel hypoplasia is seen; teeth often have bluish-white 'skimmed milk' appearance with gross vasodilatation in the pulps."
                    },
                    {
                        question: "Why is caries and periodontal disease activity greater in CHD?",
                        options: [
                            "Genetic factors",
                            "Probably due to poor oral hygiene and lack of dental attention",
                            "Diet only",
                            "Medication side effects only"
                        ],
                        correct: 1,
                        explanation: "Greater caries and periodontal disease activity is probably because of poor oral hygiene and lack of dental attention."
                    },
                    {
                        question: "What oral lesions may appear after cardiac surgery?",
                        options: [
                            "Permanent lesions",
                            "Transient small white non-ulcerated mucosal lesions of unknown etiology",
                            "Large ulcers",
                            "Black lesions"
                        ],
                        correct: 1,
                        explanation: "After cardiac surgery, transient small white non-ulcerated mucosal lesions of unknown etiology may appear."
                    }
                ]
            },
            6: {
                title: "Thyroid Diseases",
                questions: [
                    {
                        question: "What is the most common cause of hyperthyroidism?",
                        options: [
                            "Thyroid adenoma",
                            "Graves disease",
                            "Pituitary disease",
                            "Thyrotoxicosis factitia"
                        ],
                        correct: 1,
                        explanation: "When thyrotoxicosis occurs, it is most commonly associated with Graves disease, toxic nodular goiter, or acute thyroiditis."
                    },
                    {
                        question: "What oral manifestation may be found posterior to the foramen cecum in thyrotoxicosis?",
                        options: [
                            "Ranula",
                            "Lingual thyroid",
                            "Fibroma",
                            "Mucocele"
                        ],
                        correct: 1,
                        explanation: "A few patients with thyrotoxicosis have been found to have a lingual 'thyroid' consisting of thyroid tissue posterior to the foramen cecum."
                    },
                    {
                        question: "What sound can be heard over a hyperactive thyroid gland in Graves disease?",
                        options: [
                            "Murmur",
                            "Bruit (systolic or continuous)",
                            "Rub",
                            "Click"
                        ],
                        correct: 1,
                        explanation: "Auscultation may reveal a systolic or continuous bruit over the hyperactive gland due to engorgement of the gland's vascular system."
                    },
                    {
                        question: "What is thyrotoxic crisis (thyroid storm)?",
                        options: [
                            "Sudden hypothyroidism",
                            "Acute medical emergency with restlessness, fever, tachycardia, pulmonary edema",
                            "Thyroid cancer",
                            "Thyroid nodule rupture"
                        ],
                        correct: 1,
                        explanation: "Thyrotoxic crisis manifests as restlessness, fever, tachycardia, pulmonary edema, tremor, sweating, stupor, and finally coma and death if untreated."
                    },
                    {
                        question: "Why must epinephrine be avoided in untreated thyrotoxic patients?",
                        options: [
                            "It causes allergic reactions",
                            "Risk of precipitating thyrotoxic crisis and arrhythmias",
                            "It reduces thyroid hormone",
                            "It causes bleeding"
                        ],
                        correct: 1,
                        explanation: "Use of epinephrine must be avoided in untreated or poorly treated thyrotoxic patients due to risk of thyrotoxic crisis and cardiac arrhythmias."
                    },
                    {
                        question: "What adverse reaction to propylthiouracil requires monitoring before dental surgery?",
                        options: [
                            "Hypertension",
                            "Agranulocytosis and leukopenia",
                            "Diabetes",
                            "Liver failure"
                        ],
                        correct: 1,
                        explanation: "Adverse reactions to propylthiouracil include agranulocytosis and leukopenia, increasing infection risk. CBC should be checked before surgical procedures."
                    },
                    {
                        question: "What is the most common cause of primary hypothyroidism?",
                        options: [
                            "Iodine deficiency",
                            "Hashimoto thyroiditis (autoimmune)",
                            "Thyroid surgery",
                            "Radiation"
                        ],
                        correct: 1,
                        explanation: "Autoimmune hypothyroidism (Hashimoto thyroiditis) is the most common cause of primary hypothyroidism."
                    },
                    {
                        question: "What is the clinical hallmark of Hashimoto thyroiditis?",
                        options: [
                            "Weight loss",
                            "Goiter (enlarged thyroid)",
                            "Exophthalmos",
                            "Tremor"
                        ],
                        correct: 1,
                        explanation: "Goiter is the clinical hallmark of Hashimoto thyroiditis, usually moderate in size and rubbery firm in consistency."
                    },
                    {
                        question: "What oral manifestation occurs in infants with hypothyroidism?",
                        options: [
                            "Early tooth eruption",
                            "Thick lips, enlarged tongue, delayed eruption with malocclusion",
                            "Gingival hyperplasia",
                            "Multiple caries"
                        ],
                        correct: 1,
                        explanation: "Infants with hypothyroidism present with thick lips, enlarged tongue, and delayed eruption of teeth with resulting malocclusion."
                    },
                    {
                        question: "Why must CNS depressants be avoided in severe hypothyroidism?",
                        options: [
                            "They cause allergies",
                            "Risk of precipitating myxedematous coma",
                            "They increase thyroid hormone",
                            "They cause bleeding"
                        ],
                        correct: 1,
                        explanation: "CNS depressants, sedatives, and narcotic analgesics can precipitate myxedematous coma in patients with severe hypothyroidism."
                    }
                ]
            },
            7: {
                title: "Adrenal Gland Disorders",
                questions: [
                    {
                        question: "What is the most common type of adrenal hormone overproduction?",
                        options: [
                            "Aldosterone excess",
                            "Glucocorticoid (cortisol) excess",
                            "Androgen excess",
                            "Estrogen excess"
                        ],
                        correct: 1,
                        explanation: "The most common type of overproduction is due to glucocorticoid excess, known as Cushing disease when caused by pathophysiologic processes."
                    },
                    {
                        question: "What is primary adrenocortical insufficiency also known as?",
                        options: [
                            "Cushing disease",
                            "Addison disease",
                            "Conn syndrome",
                            "Graves disease"
                        ],
                        correct: 1,
                        explanation: "Primary adrenocortical insufficiency is also known as Addison disease, occurring when the adrenal cortex is destroyed."
                    },
                    {
                        question: "What is the most common cause of tertiary adrenal insufficiency?",
                        options: [
                            "Tuberculosis",
                            "HIV infection",
                            "Chronic use of corticosteroids",
                            "Autoimmune destruction"
                        ],
                        correct: 2,
                        explanation: "Tertiary adrenal insufficiency most commonly results from processes that impair hypothalamus function, primarily chronic use of corticosteroids."
                    },
                    {
                        question: "Which type of adrenal insufficiency has the HIGHEST risk for adrenal crisis?",
                        options: [
                            "Secondary insufficiency",
                            "Tertiary insufficiency",
                            "Primary adrenal insufficiency",
                            "All have equal risk"
                        ],
                        correct: 2,
                        explanation: "The risk of adrenal crisis is highest in those with primary adrenal insufficiency, especially those who are undiagnosed or untreated."
                    },
                    {
                        question: "What blood pressure value represents hypotension requiring corrective action?",
                        options: [
                            "Systolic <120 or diastolic <70",
                            "Systolic <110 or diastolic <65",
                            "Systolic <100 or diastolic ‚â§60",
                            "Systolic <90 or diastolic <50"
                        ],
                        correct: 2,
                        explanation: "A systolic blood pressure below 100 mm Hg or a diastolic pressure at or below 60 mm Hg represents hypotension requiring corrective action."
                    },
                    {
                        question: "Which patients are currently recommended to receive corticosteroid supplementation for dental procedures?",
                        options: [
                            "All patients taking steroids",
                            "Only patients with primary adrenal insufficiency",
                            "Patients with secondary insufficiency",
                            "Patients with tertiary insufficiency"
                        ],
                        correct: 1,
                        explanation: "Currently, only patients with primary adrenal insufficiency are recommended to receive corticosteroid supplementation."
                    },
                    {
                        question: "When should dental surgery be scheduled for patients at risk of adrenal insufficiency?",
                        options: [
                            "Afternoon when cortisol is lowest",
                            "Morning when cortisol levels are highest",
                            "Evening",
                            "Time doesn't matter"
                        ],
                        correct: 1,
                        explanation: "Surgery should be scheduled in the morning when cortisol levels are highest to minimize risk."
                    },
                    {
                        question: "What is the oral manifestation of primary adrenal insufficiency?",
                        options: [
                            "Gingival hyperplasia",
                            "Diffuse or focal brown macular pigmentation of oral mucosa",
                            "White patches",
                            "Ulcerations"
                        ],
                        correct: 1,
                        explanation: "Diffuse or focal brown macular pigmentation of the oral mucous membranes is a common finding in primary adrenal insufficiency (Addison disease)."
                    },
                    {
                        question: "What immediate treatment should be given during an adrenal crisis?",
                        options: [
                            "Oral steroids",
                            "100 mg hydrocortisone or 4 mg dexamethasone IV, fluid replacement",
                            "Antibiotics",
                            "Sedation"
                        ],
                        correct: 1,
                        explanation: "Immediate treatment requires proper positioning, fluid replacement, administration of 100 mg hydrocortisone or 4 mg dexamethasone IV, and immediate transport to medical facility."
                    },
                    {
                        question: "Why should barbiturates be used cautiously in patients with adrenal insufficiency?",
                        options: [
                            "They cause allergies",
                            "They enhance metabolism of cortisol and reduce blood cortisol levels",
                            "They increase blood pressure",
                            "They cause bleeding"
                        ],
                        correct: 1,
                        explanation: "Barbiturates enhance the metabolism of cortisol and reduce blood levels of cortisol, which is dangerous in patients with adrenal insufficiency."
                    }
                ]
            },
            8: {
                title: "Diabetes Mellitus",
                questions: [
                    {
                        question: "What characterizes diabetes mellitus?",
                        options: [
                            "Low blood glucose levels",
                            "High blood glucose levels (hyperglycemia) and inability to produce/use insulin",
                            "High blood pressure",
                            "Low insulin production only"
                        ],
                        correct: 1,
                        explanation: "Diabetes mellitus is characterized by high blood glucose levels (hyperglycemia) and the inability to produce and/or use insulin."
                    },
                    {
                        question: "What is the typical age of onset for Type 1 diabetes?",
                        options: [
                            "Infancy",
                            "Nonobese children or young adults <40 years (but can occur at any age)",
                            "After age 40",
                            "After age 60"
                        ],
                        correct: 1,
                        explanation: "Type 1 diabetes is typically diagnosed in nonobese children or young adults younger than 40 years of age; however, it may occur at any age."
                    },
                    {
                        question: "What is the typical age of onset for Type 2 diabetes?",
                        options: [
                            "Childhood",
                            "Adolescence",
                            "After age 40, more often in obese individuals",
                            "After age 70"
                        ],
                        correct: 2,
                        explanation: "Type 2 diabetes generally occurs after age 40 and more often affects obese individuals."
                    },
                    {
                        question: "What are the cardinal signs/symptoms of diabetes (the 4 P's)?",
                        options: [
                            "Pain, pallor, palpitations, paresthesia",
                            "Polydipsia, polyuria, polyphagia, weight loss",
                            "Pressure, pulse, pallor, pain",
                            "Protein, potassium, phosphate, pH"
                        ],
                        correct: 1,
                        explanation: "The cardinal manifestations are polydipsia (excessive thirst), polyuria (excessive urination), polyphagia (excessive eating), weight loss, and loss of strength."
                    },
                    {
                        question: "What fasting blood glucose level indicates referral to a physician?",
                        options: [
                            "‚â•100 mg/100 mL",
                            "‚â•110 mg/100 mL",
                            "‚â•126 mg/100 mL",
                            "‚â•140 mg/100 mL"
                        ],
                        correct: 2,
                        explanation: "Patients with an estimated fasting blood glucose level of 126 mg/100 mL or higher should be referred to a physician for medical evaluation."
                    },
                    {
                        question: "What 2-hour postprandial blood glucose level indicates referral?",
                        options: [
                            "‚â•140 mg/100 mL",
                            "‚â•160 mg/100 mL",
                            "‚â•180 mg/100 mL",
                            "‚â•200 mg/100 mL"
                        ],
                        correct: 3,
                        explanation: "Those with a 2-hour postprandial blood glucose level of 200 mg/100 mL or higher should be referred to a physician."
                    },
                    {
                        question: "At what fasting blood glucose level does infection risk increase by 20% after surgery?",
                        options: [
                            "150-180 mg/100 mL",
                            "180-206 mg/100 mL",
                            "207-229 mg/100 mL",
                            "Above 230 mg/100 mL"
                        ],
                        correct: 2,
                        explanation: "If fasting blood glucose is between 207-229 mg/100 mL, infection risk is predicted to increase by 20% with surgical procedures."
                    },
                    {
                        question: "At what fasting blood glucose level does infection risk increase by 80%?",
                        options: [
                            "Above 180 mg/100 mL",
                            "Above 200 mg/100 mL",
                            "Above 230 mg/100 mL",
                            "Above 250 mg/100 mL"
                        ],
                        correct: 2,
                        explanation: "If fasting blood glucose rises to above 230 mg/100 mL, an 80% increased risk of infection postoperatively has been reported."
                    },
                    {
                        question: "When should dental appointments be scheduled for diabetic patients?",
                        options: [
                            "Late afternoon",
                            "Evening",
                            "Morning appointments",
                            "Time doesn't matter"
                        ],
                        correct: 2,
                        explanation: "Appointments usually are best scheduled in the morning for diabetic patients."
                    },
                    {
                        question: "What oral complication is more common in patients with uncontrolled diabetes?",
                        options: [
                            "Gingival hyperplasia",
                            "More severe periodontal disease and abscesses",
                            "Oral cancer",
                            "Enamel hypoplasia"
                        ],
                        correct: 1,
                        explanation: "Adults with uncontrolled diabetes have more severe manifestations of periodontal disease, including periodontal abscesses, than adults without diabetes."
                    }
                ]
            }
        };

        // Game State
        let currentLecture = null;
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let currentStreak = 0;
        let bestStreak = 0;
        let totalCorrect = 0;
        let level = 1;
        let xp = 0;
        let selectedAnswer = null;
        let ownedItems = [];
        let equippedItems = {
            theme: null,
            background: null,
            powerup: null,
            title: null
        };

        // Shop Items
        const shopItems = {
            cosmetics: [
                { id: 'theme_dark', name: 'Dark Mode', icon: 'üåô', price: 500, description: 'Easy on the eyes' },
                { id: 'theme_retro', name: 'Retro Theme', icon: 'üëæ', price: 750, description: 'Old school vibes' },
                { id: 'theme_neon', name: 'Neon Theme', icon: '‚ú®', price: 1000, description: 'Bright and bold' },
            ],
            powerups: [
                { id: 'skip_question', name: 'Skip Question', icon: '‚è≠Ô∏è', price: 100, description: 'Skip one question', consumable: true },
                { id: 'fifty_fifty', name: '50/50', icon: 'üé≤', price: 150, description: 'Remove 2 wrong answers', consumable: true },
                { id: 'double_xp', name: 'Double XP', icon: '‚ö°', price: 300, description: '2x XP for one quiz', consumable: true },
            ],
            titles: [
                { id: 'title_novice', name: 'Medical Novice', icon: 'üéì', price: 200, description: 'Show your learning' },
                { id: 'title_expert', name: 'Heart Expert', icon: '‚ù§Ô∏è', price: 500, description: 'Cardiac specialist' },
                { id: 'title_master', name: 'Quiz Master', icon: 'üëë', price: 1000, description: 'Ultimate achievement' },
            ]
        };

        // Achievements
        const achievements = [
            { id: 'first_correct', name: 'First Steps', description: 'Answer your first question correctly', xp: 50 },
            { id: 'streak_5', name: 'On Fire!', description: 'Get a 5 question streak', xp: 100 },
            { id: 'streak_10', name: 'Unstoppable!', description: 'Get a 10 question streak', xp: 250 },
            { id: 'complete_lecture', name: 'Lecture Complete', description: 'Complete your first lecture', xp: 150 },
            { id: 'perfect_score', name: 'Perfect!', description: 'Get 100% on a lecture', xp: 500 },
            { id: 'level_5', name: 'Rising Star', description: 'Reach level 5', xp: 300 },
            { id: 'level_10', name: 'Expert', description: 'Reach level 10', xp: 600 },
        ];

        let unlockedAchievements = [];

        // Username for leaderboard
        let username = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadGameState();
            loadNotes();
            setupEventListeners();
            updateStatsDisplay();
            updateInventoryDisplay();
            
            // Check if username exists, if not show modal
            if (!username) {
                document.getElementById('usernameModal').classList.add('active');
            }
        });

        function setupEventListeners() {
            document.querySelectorAll('.lecture-btn').forEach(btn => {
                btn.addEventListener('click', () => selectLecture(btn.dataset.lecture));
            });
        }

        function selectLecture(lectureNum) {
            currentLecture = parseInt(lectureNum);
            currentQuestionIndex = 0;
            userAnswers = [];
            selectedAnswer = null;
            
            document.querySelectorAll('.lecture-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('quizContainer').classList.add('active');
            document.getElementById('scoreDisplay').style.display = 'none';
            
            loadQuestion();
            updateProgress();
        }

        function loadQuestion() {
            const lecture = quizData[currentLecture];
            const question = lecture.questions[currentQuestionIndex];
            
            document.getElementById('quizTitle').textContent = lecture.title;
            
            const questionHTML = `
                <div class="question-card">
                    <div class="question-number">Question ${currentQuestionIndex + 1} of ${lecture.questions.length}</div>
                    <div class="question-text">${question.question}</div>
                    <ul class="options">
                        ${question.options.map((option, index) => `
                            <li class="option" data-index="${index}" onclick="selectOption(${index})">
                                ${option}
                            </li>
                        `).join('')}
                    </ul>
                    <div class="feedback" id="feedback"></div>
                </div>
            `;
            
            document.getElementById('questionContainer').innerHTML = questionHTML;
            selectedAnswer = null;
            updateNavigationButtons();
        }

        function selectOption(index) {
            if (userAnswers[currentQuestionIndex] !== undefined) return;
            
            selectedAnswer = index;
            const options = document.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            options[index].classList.add('selected');
            
            checkAnswer(index);
        }

        function checkAnswer(selectedIndex) {
            const lecture = quizData[currentLecture];
            const question = lecture.questions[currentQuestionIndex];
            const isCorrect = selectedIndex === question.correct;
            
            userAnswers[currentQuestionIndex] = {
                selected: selectedIndex,
                correct: question.correct,
                isCorrect: isCorrect
            };
            
            const options = document.querySelectorAll('.option');
            options.forEach((opt, idx) => {
                opt.classList.add('disabled');
                if (idx === question.correct) {
                    opt.classList.add('correct');
                } else if (idx === selectedIndex && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });
            
            const feedback = document.getElementById('feedback');
            feedback.className = `feedback show ${isCorrect ? 'correct' : 'incorrect'}`;
            feedback.innerHTML = `
                <strong>${isCorrect ? '‚úì Correct!' : '‚úó Incorrect'}</strong>
                <p>${question.explanation}</p>
            `;
            
            if (isCorrect) {
                handleCorrectAnswer();
            } else {
                handleIncorrectAnswer();
            }
            
            updateNavigationButtons();
        }

        function handleCorrectAnswer() {
            currentStreak++;
            totalCorrect++;
            
            if (currentStreak > bestStreak) {
                bestStreak = currentStreak;
            }
            
            const baseXP = 10;
            const streakBonus = Math.min(currentStreak * 2, 50);
            const earnedXP = baseXP + streakBonus;
            
            addXP(earnedXP);
            
            showScorePopup('+' + earnedXP + ' XP', true);
            createScreenFlash(true);
            createConfetti();
            
            if (currentStreak >= 5) {
                showStreakCounter();
                if (currentStreak === 5) showComboText('5 STREAK!');
                if (currentStreak === 10) {
                    showComboText('10 STREAK!');
                    showMegaCombo();
                }
            }
            
            checkAchievements();
            updateStatsDisplay();
            saveGameState();
        }

        function handleIncorrectAnswer() {
            currentStreak = 0;
            document.getElementById('streakCounter').style.display = 'none';
            createScreenFlash(false);
            showScorePopup('0 XP', false);
        }

        function addXP(amount) {
            xp += amount;
            
            const xpForNextLevel = level * 100;
            while (xp >= xpForNextLevel) {
                level++;
                xp -= xpForNextLevel;
                showAchievement(`Level ${level} Reached!`, 'üéâ');
                checkAchievements();
            }
            
            updateStatsDisplay();
        }

        function checkAchievements() {
            const toCheck = [
                { id: 'first_correct', condition: totalCorrect >= 1 },
                { id: 'streak_5', condition: currentStreak >= 5 },
                { id: 'streak_10', condition: currentStreak >= 10 },
                { id: 'level_5', condition: level >= 5 },
                { id: 'level_10', condition: level >= 10 },
            ];
            
            toCheck.forEach(({ id, condition }) => {
                if (condition && !unlockedAchievements.includes(id)) {
                    const achievement = achievements.find(a => a.id === id);
                    if (achievement) {
                        unlockedAchievements.push(id);
                        showAchievement(achievement.name, achievement.description);
                        addXP(achievement.xp);
                        saveGameState();
                    }
                }
            });
        }

        function showAchievement(title, description) {
            const popup = document.createElement('div');
            popup.className = 'achievement-popup';
            popup.innerHTML = `
                <div>üèÜ ${title}</div>
                <div style="font-size: 0.8em; margin-top: 5px;">${description}</div>
            `;
            document.body.appendChild(popup);
            
            setTimeout(() => popup.remove(), 3000);
        }

        function showStreakCounter() {
            const counter = document.getElementById('streakCounter');
            counter.style.display = 'block';
            document.getElementById('streakNumber').textContent = currentStreak;
            
            if (currentStreak >= 10) {
                counter.classList.add('fire');
            }
        }

        function showComboText(text) {
            const combo = document.createElement('div');
            combo.className = 'combo-text';
            combo.textContent = text;
            document.body.appendChild(combo);
            
            setTimeout(() => combo.remove(), 1000);
        }

        function showMegaCombo() {
            const mega = document.createElement('div');
            mega.className = 'mega-combo';
            mega.textContent = 'MEGA COMBO!';
            document.body.appendChild(mega);
            
            for (let i = 0; i < 20; i++) {
                setTimeout(() => createLightning(), i * 50);
            }
            
            setTimeout(() => mega.remove(), 2000);
        }

        function showScorePopup(text, isCorrect) {
            const popup = document.createElement('div');
            popup.className = 'score-popup';
            popup.textContent = text;
            popup.style.color = isCorrect ? '#27ae60' : '#e74c3c';
            popup.style.left = Math.random() * 60 + 20 + '%';
            document.body.appendChild(popup);
            
            setTimeout(() => popup.remove(), 1500);
        }

        function createScreenFlash(isCorrect) {
            const flash = document.createElement('div');
            flash.className = `screen-flash ${isCorrect ? 'correct' : 'incorrect'}`;
            document.body.appendChild(flash);
            
            setTimeout(() => flash.remove(), 300);
        }

        function createConfetti() {
            for (let i = 0; i < 30; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = ['#e74c3c', '#3498db', '#f39c12', '#27ae60'][Math.floor(Math.random() * 4)];
                    confetti.style.animation = `confettiFall ${2 + Math.random()}s linear`;
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 50);
            }
        }

        function createLightning() {
            const lightning = document.createElement('div');
            lightning.className = 'lightning-effect';
            lightning.style.left = Math.random() * 100 + '%';
            document.body.appendChild(lightning);
            
            setTimeout(() => lightning.remove(), 100);
        }

        function updateStatsDisplay() {
            document.getElementById('levelDisplay').textContent = level;
            document.getElementById('xpDisplay').textContent = xp;
            document.getElementById('correctDisplay').textContent = totalCorrect;
            document.getElementById('bestStreakDisplay').textContent = bestStreak;
            document.getElementById('shopXP').textContent = xp;
            
            const xpForNextLevel = level * 100;
            const progress = (xp / xpForNextLevel) * 100;
            document.getElementById('levelFill').style.width = progress + '%';
            document.getElementById('levelText').textContent = `${xp} / ${xpForNextLevel} XP`;
        }

        function updateInventoryDisplay() {
            const display = document.getElementById('inventoryDisplay');
            const container = document.getElementById('inventoryItems');
            
            if (equippedItems.powerup) {
                display.style.display = 'block';
                container.innerHTML = `
                    <div class="inventory-item">
                        <span class="inventory-icon">${equippedItems.powerup.icon}</span>
                        <span>${equippedItems.powerup.name}</span>
                    </div>
                `;
            } else {
                display.style.display = 'none';
            }
        }

        function updateProgress() {
            const lecture = quizData[currentLecture];
            const progress = ((currentQuestionIndex + 1) / lecture.questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('quizProgress').textContent = `Question ${currentQuestionIndex + 1} of ${lecture.questions.length}`;
        }

        function updateNavigationButtons() {
            const lecture = quizData[currentLecture];
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');
            
            prevBtn.disabled = currentQuestionIndex === 0;
            
            if (currentQuestionIndex === lecture.questions.length - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = userAnswers[currentQuestionIndex] ? 'inline-block' : 'none';
            } else {
                nextBtn.style.display = userAnswers[currentQuestionIndex] ? 'inline-block' : 'none';
                submitBtn.style.display = 'none';
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
                updateProgress();
            }
        }

        function nextQuestion() {
            const lecture = quizData[currentLecture];
            if (currentQuestionIndex < lecture.questions.length - 1 && userAnswers[currentQuestionIndex]) {
                currentQuestionIndex++;
                loadQuestion();
                updateProgress();
            }
        }

        function submitQuiz() {
            const lecture = quizData[currentLecture];
            const correctAnswers = userAnswers.filter(a => a.isCorrect).length;
            const percentage = Math.round((correctAnswers / lecture.questions.length) * 100);
            
            let bonusXP = 0;
            if (percentage === 100) {
                bonusXP = 500;
                if (!unlockedAchievements.includes('perfect_score')) {
                    unlockedAchievements.push('perfect_score');
                    showAchievement('Perfect Score!', 'Got 100% on a lecture');
                }
            } else if (percentage >= 90) {
                bonusXP = 250;
            } else if (percentage >= 80) {
                bonusXP = 100;
            }
            
            if (bonusXP > 0) {
                addXP(bonusXP);
            }
            
            if (!unlockedAchievements.includes('complete_lecture')) {
                unlockedAchievements.push('complete_lecture');
                showAchievement('Lecture Complete!', 'Finished your first lecture');
                addXP(150);
            }
            
            document.getElementById('questionContainer').style.display = 'none';
            const scoreDisplay = document.getElementById('scoreDisplay');
            scoreDisplay.style.display = 'block';
            
            document.getElementById('finalScore').textContent = `${correctAnswers} / ${lecture.questions.length}`;
            document.getElementById('scoreMessage').textContent = `${percentage}% Correct`;
            document.getElementById('bonusXP').textContent = bonusXP > 0 ? `Bonus: +${bonusXP} XP!` : '';
            
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('submitBtn').style.display = 'none';
            
            saveGameState();
            updateLeaderboardStats();
        }

        function backToHome() {
            document.getElementById('quizContainer').classList.remove('active');
            document.getElementById('welcomeScreen').style.display = 'block';
            document.querySelectorAll('.lecture-btn').forEach(btn => btn.classList.remove('active'));
            currentLecture = null;
            currentStreak = 0;
            document.getElementById('streakCounter').style.display = 'none';
        }

        // Shop Functions
        function openShop() {
            document.getElementById('shopModal').classList.add('active');
            switchShopTab('cosmetics');
        }

        function closeShop() {
            document.getElementById('shopModal').classList.remove('active');
        }

        function switchShopTab(category) {
            document.querySelectorAll('.shop-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            const items = shopItems[category];
            const container = document.getElementById('shopItems');
            
            container.innerHTML = items.map(item => {
                const owned = ownedItems.includes(item.id);
                const equipped = Object.values(equippedItems).some(e => e && e.id === item.id);
                
                return `
                    <div class="shop-item ${owned ? 'owned' : ''} ${equipped ? 'equipped' : ''}">
                        <div class="item-icon">${item.icon}</div>
                        <div class="item-name">${item.name}</div>
                        <div class="item-description">${item.description}</div>
                        <div class="item-price">${item.price} XP</div>
                        <button class="item-btn ${owned ? 'equip' : ''}" 
                                onclick="purchaseItem('${category}', '${item.id}')"
                                ${owned && !item.consumable ? '' : equipped ? 'disabled' : ''}>
                            ${owned ? (equipped ? 'EQUIPPED' : 'EQUIP') : 'BUY'}
                        </button>
                    </div>
                `;
            }).join('');
        }

        function purchaseItem(category, itemId) {
            const item = shopItems[category].find(i => i.id === itemId);
            const owned = ownedItems.includes(itemId);
            
            if (!owned) {
                if (xp >= item.price) {
                    xp -= item.price;
                    ownedItems.push(itemId);
                    showAchievement('Item Purchased!', item.name);
                    saveGameState();
                    updateStatsDisplay();
                    switchShopTab(category);
                } else {
                    alert('Not enough XP!');
                }
            } else {
                equipItem(category, item);
            }
        }

        function equipItem(category, item) {
            const categoryKey = category === 'cosmetics' ? 'theme' : 
                               category === 'powerups' ? 'powerup' : 'title';
            
            equippedItems[categoryKey] = item;
            updateInventoryDisplay();
            saveGameState();
            switchShopTab(category);
        }

        // Notes Functions
        function saveNote() {
            const noteText = document.getElementById('noteInput').value.trim();
            if (!noteText) return;
            
            const notes = JSON.parse(localStorage.getItem('quizNotes') || '[]');
            notes.push({
                text: noteText,
                lecture: currentLecture ? quizData[currentLecture].title : 'General',
                date: new Date().toLocaleDateString()
            });
            
            localStorage.setItem('quizNotes', JSON.stringify(notes));
            document.getElementById('noteInput').value = '';
            loadNotes();
            showAchievement('Note Saved!', 'Keep up the good work');
        }

        function clearNote() {
            document.getElementById('noteInput').value = '';
        }

        function loadNotes() {
            const notes = JSON.parse(localStorage.getItem('quizNotes') || '[]');
            const container = document.getElementById('notesContainer');
            
            if (notes.length === 0) {
                container.innerHTML = '<p style="color: #7f8c8d; text-align: center;">No notes yet</p>';
                return;
            }
            
            container.innerHTML = notes.map((note, index) => `
                <div class="note-item">
                    <div class="note-lecture">${note.lecture}</div>
                    <div class="note-text">${note.text}</div>
                    <div class="note-date">${note.date}</div>
                </div>
            `).join('');
        }

        // Save/Load Functions
        function saveGameState() {
            const state = {
                level,
                xp,
                totalCorrect,
                bestStreak,
                ownedItems,
                equippedItems,
                unlockedAchievements,
                username
            };
            localStorage.setItem('quizGameState', JSON.stringify(state));
        }

        function loadGameState() {
            const saved = localStorage.getItem('quizGameState');
            if (saved) {
                const state = JSON.parse(saved);
                level = state.level || 1;
                xp = state.xp || 0;
                totalCorrect = state.totalCorrect || 0;
                bestStreak = state.bestStreak || 0;
                ownedItems = state.ownedItems || [];
                equippedItems = state.equippedItems || { theme: null, background: null, powerup: null, title: null };
                unlockedAchievements = state.unlockedAchievements || [];
                username = state.username || null;
            }
        }

        // =========================
        // GITHUB LEADERBOARD FUNCTIONS
        // =========================

        async function fetchLeaderboardFromGitHub() {
            try {
                const response = await fetch(`https://api.github.com/gists/${GITHUB_CONFIG.gistId}`, {
                    headers: {
                        'Authorization': `token ${GITHUB_CONFIG.token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });

                if (!response.ok) {
                    throw new Error(`GitHub API error: ${response.status}`);
                }

                const gist = await response.json();
                const fileContent = gist.files[GITHUB_CONFIG.filename]?.content;
                
                if (!fileContent) {
                    return [];
                }

                return JSON.parse(fileContent);
            } catch (error) {
                console.error('Error fetching leaderboard:', error);
                showSyncStatus('error', 'Failed to load leaderboard');
                return [];
            }
        }

        async function updateLeaderboardToGitHub(leaderboardData) {
            try {
                showSyncStatus('syncing', 'Syncing...');

                const response = await fetch(`https://api.github.com/gists/${GITHUB_CONFIG.gistId}`, {
                    method: 'PATCH',
                    headers: {
                        'Authorization': `token ${GITHUB_CONFIG.token}`,
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        files: {
                            [GITHUB_CONFIG.filename]: {
                                content: JSON.stringify(leaderboardData, null, 2)
                            }
                        }
                    })
                });

                if (!response.ok) {
                    throw new Error(`GitHub API error: ${response.status}`);
                }

                showSyncStatus('synced', 'Synced!');
                setTimeout(() => hideSyncStatus(), 2000);
                return true;
            } catch (error) {
                console.error('Error updating leaderboard:', error);
                showSyncStatus('error', 'Sync failed');
                setTimeout(() => hideSyncStatus(), 3000);
                return false;
            }
        }

        async function updateLeaderboardStats() {
            if (!username) return;

            try {
                // Fetch current leaderboard
                let leaderboard = await fetchLeaderboardFromGitHub();
                
                // Find or create user entry
                let userEntry = leaderboard.find(entry => entry.username === username);
                
                if (userEntry) {
                    // Update existing entry
                    userEntry.level = level;
                    userEntry.xp = xp;
                    userEntry.totalCorrect = totalCorrect;
                    userEntry.bestStreak = bestStreak;
                    userEntry.achievements = unlockedAchievements.length;
                    userEntry.lastActive = new Date().toISOString();
                } else {
                    // Create new entry
                    userEntry = {
                        username: username,
                        level: level,
                        xp: xp,
                        totalCorrect: totalCorrect,
                        bestStreak: bestStreak,
                        achievements: unlockedAchievements.length,
                        lastActive: new Date().toISOString(),
                        joinDate: new Date().toISOString()
                    };
                    leaderboard.push(userEntry);
                }

                // Sort by level (desc), then xp (desc)
                leaderboard.sort((a, b) => {
                    if (b.level !== a.level) return b.level - a.level;
                    return b.xp - a.xp;
                });

                // Update GitHub
                await updateLeaderboardToGitHub(leaderboard);
            } catch (error) {
                console.error('Error updating leaderboard stats:', error);
            }
        }

        async function generateGlobalLeaderboard() {
            try {
                const leaderboard = await fetchLeaderboardFromGitHub();
                const container = document.getElementById('leaderboardList');
                
                if (leaderboard.length === 0) {
                    container.innerHTML = '<p style="text-align: center; padding: 40px; color: #7f8c8d;">No players yet. Be the first!</p>';
                    updateGlobalStats([]);
                    return;
                }

                // Update global stats
                updateGlobalStats(leaderboard);

                // Generate leaderboard HTML
                container.innerHTML = leaderboard.slice(0, 50).map((player, index) => {
                    const rank = index + 1;
                    const isCurrentUser = player.username === username;
                    const rankClass = rank === 1 ? 'top1' : rank === 2 ? 'top2' : rank === 3 ? 'top3' : '';
                    const userClass = isCurrentUser ? 'current-user' : '';
                    
                    let rankIcon = '';
                    if (rank === 1) rankIcon = 'ü•á';
                    else if (rank === 2) rankIcon = 'ü•à';
                    else if (rank === 3) rankIcon = 'ü•â';
                    
                    return `
                        <div class="leaderboard-entry ${rankClass} ${userClass}">
                            ${rankIcon ? 
                                `<div class="rank-icon">${rankIcon}</div>` : 
                                `<div class="rank-number">#${rank}</div>`
                            }
                            <div class="player-info">
                                <div class="player-name">${player.username}${isCurrentUser ? ' (You)' : ''}</div>
                                <div class="player-stats">
                                    <span class="stat-badge">Level ${player.level}</span>
                                    <span class="stat-badge">${player.xp} XP</span>
                                    <span class="stat-badge">‚úì ${player.totalCorrect}</span>
                                    <span class="stat-badge">üî• ${player.bestStreak}</span>
                                    <span class="stat-badge">üèÜ ${player.achievements}</span>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('Error generating leaderboard:', error);
                document.getElementById('leaderboardList').innerHTML = 
                    '<p style="text-align: center; padding: 40px; color: #e74c3c;">Error loading leaderboard. Please try again.</p>';
            }
        }

        function updateGlobalStats(leaderboard) {
            const totalPlayers = leaderboard.length;
            const totalQuestions = leaderboard.reduce((sum, p) => sum + p.totalCorrect, 0);
            const avgLevel = totalPlayers > 0 ? Math.round(leaderboard.reduce((sum, p) => sum + p.level, 0) / totalPlayers) : 0;
            const bestStreak = Math.max(...leaderboard.map(p => p.bestStreak), 0);

            document.getElementById('totalPlayers').textContent = totalPlayers;
            document.getElementById('totalQuestions').textContent = totalQuestions;
            document.getElementById('avgLevel').textContent = avgLevel;
            document.getElementById('bestStreak').textContent = bestStreak;
        }

        function openLeaderboard() {
            document.getElementById('leaderboardModal').classList.add('active');
            generateGlobalLeaderboard();
        }

        function closeLeaderboard() {
            document.getElementById('leaderboardModal').classList.remove('active');
        }

        function switchLeaderboardTab(tab) {
            document.querySelectorAll('.leaderboard-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            if (tab === 'global') {
                generateGlobalLeaderboard();
            } else {
                // Weekly leaderboard - filter by last 7 days
                generateWeeklyLeaderboard();
            }
        }

        async function generateWeeklyLeaderboard() {
            try {
                const leaderboard = await fetchLeaderboardFromGitHub();
                const weekAgo = new Date();
                weekAgo.setDate(weekAgo.getDate() - 7);
                
                const weeklyPlayers = leaderboard.filter(player => {
                    const lastActive = new Date(player.lastActive);
                    return lastActive >= weekAgo;
                });

                const container = document.getElementById('leaderboardList');
                
                if (weeklyPlayers.length === 0) {
                    container.innerHTML = '<p style="text-align: center; padding: 40px; color: #7f8c8d;">No activity this week. Be the first!</p>';
                    return;
                }

                container.innerHTML = weeklyPlayers.slice(0, 50).map((player, index) => {
                    const rank = index + 1;
                    const isCurrentUser = player.username === username;
                    const rankClass = rank === 1 ? 'top1' : rank === 2 ? 'top2' : rank === 3 ? 'top3' : '';
                    const userClass = isCurrentUser ? 'current-user' : '';
                    
                    let rankIcon = '';
                    if (rank === 1) rankIcon = 'ü•á';
                    else if (rank === 2) rankIcon = 'ü•à';
                    else if (rank === 3) rankIcon = 'ü•â';
                    
                    return `
                        <div class="leaderboard-entry ${rankClass} ${userClass}">
                            ${rankIcon ? 
                                `<div class="rank-icon">${rankIcon}</div>` : 
                                `<div class="rank-number">#${rank}</div>`
                            }
                            <div class="player-info">
                                <div class="player-name">${player.username}${isCurrentUser ? ' (You)' : ''}</div>
                                <div class="player-stats">
                                    <span class="stat-badge">Level ${player.level}</span>
                                    <span class="stat-badge">${player.xp} XP</span>
                                    <span class="stat-badge">‚úì ${player.totalCorrect}</span>
                                    <span class="stat-badge">üî• ${player.bestStreak}</span>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('Error generating weekly leaderboard:', error);
            }
        }

        function saveUsername() {
            const input = document.getElementById('usernameInput').value.trim();
            if (!input) {
                alert('Please enter a username');
                return;
            }
            
            username = input;
            saveGameState();
            document.getElementById('usernameModal').classList.remove('active');
            updateLeaderboardStats();
            showAchievement('Welcome!', `Good luck, ${username}!`);
        }

        function showSyncStatus(status, text) {
            const syncStatus = document.getElementById('syncStatus');
            const syncText = document.getElementById('syncText');
            
            syncStatus.className = `sync-status ${status}`;
            syncText.textContent = text;
        }

        function hideSyncStatus() {
            document.getElementById('syncStatus').className = 'sync-status';
        }

        // Auto-sync every 5 minutes
        setInterval(() => {
            if (username) {
                updateLeaderboardStats();
            }
        }, 5 * 60 * 1000);
    </script>
</body>
</html>
